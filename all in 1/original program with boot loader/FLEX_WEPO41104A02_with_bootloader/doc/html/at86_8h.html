<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>SPIKE 1.1: at86.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PROM_RZ_LogoRGB_ohne_pos.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SPIKE 1.1
   &#160;<span id="projectnumber">WEPO41104A02</span>
   </div>
   <div id="projectbrief">Firmware Flex</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d522931ffa1371640980b621734a4381.html">Users</a></li><li class="navelem"><a class="el" href="dir_469310237784cc89c19ea77860f7ce65.html">andre.kuhn</a></li><li class="navelem"><a class="el" href="dir_6014bec9dc2ba7a1a0e09d557a043d76.html">Desktop</a></li><li class="navelem"><a class="el" href="dir_82843f528740f7f73694df6f0d24e686.html">lokal_bis_neuer_server</a></li><li class="navelem"><a class="el" href="dir_85a6e3b00f8d3174ba5cc84e6a5afd08.html">WEPO4110xA00_SPIKE_1.1</a></li><li class="navelem"><a class="el" href="dir_86d3a7f6583734946091a11bc0855e56.html">WEPO41104Axx_Flex</a></li><li class="navelem"><a class="el" href="dir_ac799df13ee37fcdc8ca7ed89286b546.html">WEPO41104A02</a></li><li class="navelem"><a class="el" href="dir_1e3008f8f9871edebede22f73d480289.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">at86.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file implements the API for the AT86RF231 radio transceiver.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="at86rf231_8h_source.html">at86rf231.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="tal__constants_8h_source.html">tal_constants.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ieee__const_8h_source.html">ieee_const.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pal__config_8h_source.html">pal_config.h</a>&quot;</code><br/>
<code>#include &lt;avr/io.h&gt;</code><br/>
<code>#include &lt;inttypes.h&gt;</code><br/>
<code>#include &lt;avr/Interrupt.h&gt;</code><br/>
<code>#include &lt;util/delay.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for at86.h:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h__incl.png" border="0" usemap="#at86_8h" alt=""/></div>
<map name="at86_8h" id="at86_8h">
<area shape="rect" id="node7" href="at86rf231_8h.html" title="File contains register and command defines specific for AT86RF231. " alt="" coords="194,80,280,107"/><area shape="rect" id="node9" href="tal__constants_8h.html" title="This file contains constants used througthout the TAL. " alt="" coords="305,80,415,107"/><area shape="rect" id="node11" href="ieee__const_8h.html" title="This header holds all IEEE 802.15.4&#45;2006 constants and attribute identifiers. " alt="" coords="440,80,536,107"/><area shape="rect" id="node13" href="pal__config_8h.html" title="PAL configuration for ATmega1281. " alt="" coords="560,80,651,107"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h__dep__incl.png" border="0" usemap="#at86_8hdep" alt=""/></div>
<map name="at86_8hdep" id="at86_8hdep">
<area shape="rect" id="node3" href="at86rf231_8c.html" title="at86rf231.c" alt="" coords="5,80,91,107"/><area shape="rect" id="node5" href="pm__config__protocol_8h.html" title="PM configuration protocol. " alt="" coords="167,80,312,107"/><area shape="rect" id="node7" href="WEPO41104A02_8h.html" title="Main header of the program. " alt="" coords="38,155,169,181"/><area shape="rect" id="node14" href="ZMD_8h.html" title="ZMD.h" alt="" coords="337,80,396,107"/><area shape="rect" id="node18" href="pal__trx__access_8c.html" title="Transceiver registers &amp; Buffer accessing functions for AVR 8&#45;Bit SPI based MCUs. " alt="" coords="421,80,541,107"/><area shape="rect" id="node11" href="pm__config__protocol_8c.html" title="PM configuration protocol. " alt="" coords="194,155,339,181"/><area shape="rect" id="node9" href="WEPO41104A02_8c.html" title="WEPO41104A02.c" alt="" coords="38,229,169,256"/><area shape="rect" id="node16" href="ZMD_8c.html" title="ZMD.c" alt="" coords="363,155,423,181"/></map>
</div>
</div>
<p><a href="at86_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structat86rf231__frame.html">at86rf231_frame</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT86RF231 Frame struct including frame header.  <a href="structat86rf231__frame.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspike__payload.html">spike_payload</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Spike tx payload data struct.  <a href="structspike__payload.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a05b69600d1256b27dea8092ea9a23723"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a05b69600d1256b27dea8092ea9a23723">ENABLE_TRX_SRAM</a></td></tr>
<tr class="separator:a05b69600d1256b27dea8092ea9a23723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14f2569844671800395115b02424adb5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a14f2569844671800395115b02424adb5">PAL_RST_HIGH</a>()&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#aa2c48ee56a1a2b4bd081f694fcbbd33e">RST_HIGH</a>()</td></tr>
<tr class="separator:a14f2569844671800395115b02424adb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69366461b21ba05299802358bc8388c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a69366461b21ba05299802358bc8388c0">PAL_RST_LOW</a>()&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#a9db6cc31e44a6c3a13bcc8a89112d045">RST_LOW</a>()</td></tr>
<tr class="separator:a69366461b21ba05299802358bc8388c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909f4d81b984a22c3e09b047b5a8990d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a909f4d81b984a22c3e09b047b5a8990d">PAL_SLP_TR_HIGH</a>()&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#ab909ad4a2d0f526c282fe7d344f0c748">SLP_TR_HIGH</a>()</td></tr>
<tr class="separator:a909f4d81b984a22c3e09b047b5a8990d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1441d594c76410852907f9b917141a24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a1441d594c76410852907f9b917141a24">PAL_SLP_TR_LOW</a>()&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#a9d68a32b5c86a30bad26138027cf5af3">SLP_TR_LOW</a>()</td></tr>
<tr class="separator:a1441d594c76410852907f9b917141a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9e1119b777a457b32bd540a56cbf19"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#acf9e1119b777a457b32bd540a56cbf19">READ_ACCESS_COMMAND</a>&#160;&#160;&#160;(0x80)</td></tr>
<tr class="separator:acf9e1119b777a457b32bd540a56cbf19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ee57bd62460fcfda2945bf557f6a08"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a67ee57bd62460fcfda2945bf557f6a08">RF_BAND</a>&#160;&#160;&#160;BAND_2400</td></tr>
<tr class="separator:a67ee57bd62460fcfda2945bf557f6a08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6e677a01ad8ab8134ffc7a68b814048"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#ae6e677a01ad8ab8134ffc7a68b814048">SAMPLES_PER_PACKET</a>&#160;&#160;&#160;7</td></tr>
<tr class="separator:ae6e677a01ad8ab8134ffc7a68b814048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bb4d5253ce0b4e39f51f284732d54c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a1bb4d5253ce0b4e39f51f284732d54c9">SHORTENUM</a>&#160;&#160;&#160;__attribute__((packed))</td></tr>
<tr class="separator:a1bb4d5253ce0b4e39f51f284732d54c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93ac6c6eb7ea847ef05f0a1ddf37a63c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a93ac6c6eb7ea847ef05f0a1ddf37a63c">TAL_TYPE</a>&#160;&#160;&#160;AT86RF231</td></tr>
<tr class="separator:a93ac6c6eb7ea847ef05f0a1ddf37a63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a142459b1d8d88f28b6f70db90b9fb748"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a142459b1d8d88f28b6f70db90b9fb748">TRX_CMD_FR</a>&#160;&#160;&#160;(0x20)</td></tr>
<tr class="separator:a142459b1d8d88f28b6f70db90b9fb748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a504fbcaa8f1b5ba4840d6170dba02"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a50a504fbcaa8f1b5ba4840d6170dba02">TRX_CMD_FW</a>&#160;&#160;&#160;(0x60)</td></tr>
<tr class="separator:a50a504fbcaa8f1b5ba4840d6170dba02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5900743b4bfc28ddf5f4aa116aed4121"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a5900743b4bfc28ddf5f4aa116aed4121">TRX_CMD_SR</a>&#160;&#160;&#160;(0x00)</td></tr>
<tr class="separator:a5900743b4bfc28ddf5f4aa116aed4121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9b89efb1a80ebca833d359c02202e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a8b9b89efb1a80ebca833d359c02202e3">TRX_CMD_SW</a>&#160;&#160;&#160;(0x40)</td></tr>
<tr class="separator:a8b9b89efb1a80ebca833d359c02202e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1daa2410cc8a201106812499160257bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a1daa2410cc8a201106812499160257bc">WRITE_ACCESS_COMMAND</a>&#160;&#160;&#160;(0xC0)</td></tr>
<tr class="separator:a1daa2410cc8a201106812499160257bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a85471cc074a348fe55817555c12ac59b"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345">csma_mode_tag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a85471cc074a348fe55817555c12ac59b">csma_mode_t</a></td></tr>
<tr class="separator:a85471cc074a348fe55817555c12ac59b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73c40bab4af81ce4df0c8b04471c8ac0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a73c40bab4af81ce4df0c8b04471c8ac0">irq_handler_t</a> )(void)</td></tr>
<tr class="separator:a73c40bab4af81ce4df0c8b04471c8ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a666f35fa9c02396650a934fc41040710"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5c">tal_state_tag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a666f35fa9c02396650a934fc41040710">tal_state_t</a></td></tr>
<tr class="memdesc:a666f35fa9c02396650a934fc41040710"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT86RF231 Transceiver states.  <a href="#a666f35fa9c02396650a934fc41040710">More...</a><br/></td></tr>
<tr class="separator:a666f35fa9c02396650a934fc41040710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea71e6c58f5ea6ecf98fb469fb529746"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672">trx_irq_hdlr_idx_tag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a></td></tr>
<tr class="separator:aea71e6c58f5ea6ecf98fb469fb529746"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa37282f17d91549add4e10942533d345"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345">csma_mode_tag</a> { <a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345accf068575a579e8aa4ab56de9d7eaf78">NO_CSMA_NO_IFS</a>, 
<a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345abbf9d12e513772ccde5b0377a1627f25">NO_CSMA_WITH_IFS</a>, 
<a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345aeb1c3320a3cffeb94384bf2e26afe935">CSMA_UNSLOTTED</a>, 
<a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345a2fdcf77d6c73072fd265eb5fc3884f09">CSMA_SLOTTED</a>
 }</td></tr>
<tr class="separator:aa37282f17d91549add4e10942533d345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa30929a334a605eb5e33a386ea151a5c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5c">tal_state_tag</a> { <a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5ca8bcdc7a42f379e0b3a4e9c190b8be5d4">TAL_IDLE</a> = 0, 
<a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5caa86ebb421fb1c52a6da04b629b6cc538">TAL_TX_AUTO</a> = 1, 
<a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5cafad08d85ec5d300df68377df267af4a6">TAL_TX_DONE</a> = 2
 }</td></tr>
<tr class="memdesc:aa30929a334a605eb5e33a386ea151a5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">AT86RF231 Transceiver states.  <a href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5c">More...</a><br/></td></tr>
<tr class="separator:aa30929a334a605eb5e33a386ea151a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c991f2b544965c9056c3f3a34a7f672"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672">trx_irq_hdlr_idx_tag</a> { <br/>
&#160;&#160;<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a0b4d8d04ed24a41b486889a49c750090">TRX_MAIN_IRQ_HDLR_IDX</a> = 0, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672afae19ecc0e2e977bb5535563c897fc00">TRX_TSTAMP_IRQ_HDLR_IDX</a>, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a2e0700bc6ac3147e7ead21436ce98bc6">TRX_ALTERNATE_0_IRQ_HDLR_IDX</a>, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a5f72a3748ced8312b72036375446de23">TRX_ALTERNATE_1_IRQ_HDLR_IDX</a>, 
<br/>
&#160;&#160;<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a301d6c0ca0b0767908694d15edff40c1">TRX_ALTERNATE_2_IRQ_HDLR_IDX</a>, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a101f261d61c47c1973b531487454412a">TRX_ALTERNATE_3_IRQ_HDLR_IDX</a>, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672af586f1846eb2b44103e96bdd0581df2a">TRX_ALTERNATE_4_IRQ_HDLR_IDX</a>, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672abefcaffd94d0e4f6148f67ba9d9890a2">TRX_ALTERNATE_5_IRQ_HDLR_IDX</a>, 
<br/>
&#160;&#160;<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a77f592a01feca0f89df3346c8ea01e60">TRX_ALTERNATE_6_IRQ_HDLR_IDX</a>, 
<a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a7cdaaaaa7e644b1cb875f1727ace8690">TRX_ALTERNATE_7_IRQ_HDLR_IDX</a>
<br/>
 }</td></tr>
<tr class="separator:a1c991f2b544965c9056c3f3a34a7f672"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0da266448f852413ba43e88e4ea99a84"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a0da266448f852413ba43e88e4ea99a84">at86rf231_change_channel</a> (uint8_t new_channel)</td></tr>
<tr class="memdesc:a0da266448f852413ba43e88e4ea99a84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply channel to transceiver.  <a href="#a0da266448f852413ba43e88e4ea99a84">More...</a><br/></td></tr>
<tr class="separator:a0da266448f852413ba43e88e4ea99a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af609fd7593c4cc52caa234572c3a0f30"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#af609fd7593c4cc52caa234572c3a0f30">at86rf231_change_channel_page</a> (uint8_t ch_page)</td></tr>
<tr class="memdesc:af609fd7593c4cc52caa234572c3a0f30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply channel page configuartion to transceiver.  <a href="#af609fd7593c4cc52caa234572c3a0f30">More...</a><br/></td></tr>
<tr class="separator:af609fd7593c4cc52caa234572c3a0f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c8415e4daa3241fe710fed12dcc503d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a4c8415e4daa3241fe710fed12dcc503d">at86rf231_change_tx_pwr</a> (uint8_t pwr)</td></tr>
<tr class="memdesc:a4c8415e4daa3241fe710fed12dcc503d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply tx power to transceiver.  <a href="#a4c8415e4daa3241fe710fed12dcc503d">More...</a><br/></td></tr>
<tr class="separator:a4c8415e4daa3241fe710fed12dcc503d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a530e39a4d7d19f34689fea5113a88ddf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a530e39a4d7d19f34689fea5113a88ddf">at86rf231_ftn_pll_calibration</a> (void)</td></tr>
<tr class="memdesc:a530e39a4d7d19f34689fea5113a88ddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter tuning and PLL calibration handling Although receiver and transmitter are very robust against these variations, it is recommended to initiate the FTN manually if the radio transceiver does not use the SLEEP state. If necessary, a calibration cycle is to be initiated in states TRX_OFF, PLL_ON or any receive state. This applies in particular for the High Data Rate Modes with a much higher sensitivity against BPF transfer function variations. The recommended calibration interval is 5 min or less.  <a href="#a530e39a4d7d19f34689fea5113a88ddf">More...</a><br/></td></tr>
<tr class="separator:a530e39a4d7d19f34689fea5113a88ddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95cd6b5d19a0129a7b6ccb6ce985a790"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790">at86rf231_init</a> (void)</td></tr>
<tr class="memdesc:a95cd6b5d19a0129a7b6ccb6ce985a790"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init AT86RF231 Transceiver.  <a href="#a95cd6b5d19a0129a7b6ccb6ce985a790">More...</a><br/></td></tr>
<tr class="separator:a95cd6b5d19a0129a7b6ccb6ce985a790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee158241f405a92e7fa7b507c707f93"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93">at86rf231_req_data</a> (void)</td></tr>
<tr class="memdesc:a0ee158241f405a92e7fa7b507c707f93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data request and receive data with ACK and retry.  <a href="#a0ee158241f405a92e7fa7b507c707f93">More...</a><br/></td></tr>
<tr class="separator:a0ee158241f405a92e7fa7b507c707f93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a4bd7b72126a48c196271354e6fff3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a70a4bd7b72126a48c196271354e6fff3">at86rf231_rx_with_auto_ack</a> (void)</td></tr>
<tr class="memdesc:a70a4bd7b72126a48c196271354e6fff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Transceiver State = RX_AACK_ON send ACK-Frame automatically if requested.  <a href="#a70a4bd7b72126a48c196271354e6fff3">More...</a><br/></td></tr>
<tr class="separator:a70a4bd7b72126a48c196271354e6fff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bc4925ecdde78387866127fb66d3b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#ad4bc4925ecdde78387866127fb66d3b3">at86rf231_sleep</a> (void)</td></tr>
<tr class="memdesc:ad4bc4925ecdde78387866127fb66d3b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Transceiver mode = sleep.  <a href="#ad4bc4925ecdde78387866127fb66d3b3">More...</a><br/></td></tr>
<tr class="separator:ad4bc4925ecdde78387866127fb66d3b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0090e612a1bfa60ffbb2fbf58f25895"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#af0090e612a1bfa60ffbb2fbf58f25895">at86rf231_switch_pll_on</a> (void)</td></tr>
<tr class="memdesc:af0090e612a1bfa60ffbb2fbf58f25895"><td class="mdescLeft">&#160;</td><td class="mdescRight">Switch transceiver pll on and wait until it is locked.  <a href="#af0090e612a1bfa60ffbb2fbf58f25895">More...</a><br/></td></tr>
<tr class="separator:af0090e612a1bfa60ffbb2fbf58f25895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5cb2ff642e1ad6dcb9c02bafd10229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a9e5cb2ff642e1ad6dcb9c02bafd10229">at86rf231_tx</a> (void)</td></tr>
<tr class="memdesc:a9e5cb2ff642e1ad6dcb9c02bafd10229"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data without ACK and Retry.  <a href="#a9e5cb2ff642e1ad6dcb9c02bafd10229">More...</a><br/></td></tr>
<tr class="separator:a9e5cb2ff642e1ad6dcb9c02bafd10229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0927379d6138f1c424a55b84d9955c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c">at86rf231_tx_with_retry</a> (<a class="el" href="at86_8h.html#a85471cc074a348fe55817555c12ac59b">csma_mode_t</a> csma_mode, bool tx_retries)</td></tr>
<tr class="memdesc:a7e0927379d6138f1c424a55b84d9955c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends frame.  <a href="#a7e0927379d6138f1c424a55b84d9955c">More...</a><br/></td></tr>
<tr class="separator:a7e0927379d6138f1c424a55b84d9955c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6f026b912e361af35c507eac8e1b58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a6d6f026b912e361af35c507eac8e1b58">delay_us</a> (uint16_t usec)</td></tr>
<tr class="separator:a6d6f026b912e361af35c507eac8e1b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3b1f218e1475f01a95710d06423393"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a3a3b1f218e1475f01a95710d06423393">handle_received_frame_irq</a> (void)</td></tr>
<tr class="memdesc:a3a3b1f218e1475f01a95710d06423393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle received frame interrupt.  <a href="#a3a3b1f218e1475f01a95710d06423393">More...</a><br/></td></tr>
<tr class="separator:a3a3b1f218e1475f01a95710d06423393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc4173b02a827bca6a960a60b65f400"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#acbc4173b02a827bca6a960a60b65f400">pal_global_irq_disable</a> (void)</td></tr>
<tr class="memdesc:acbc4173b02a827bca6a960a60b65f400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the global interrupt.  <a href="#acbc4173b02a827bca6a960a60b65f400">More...</a><br/></td></tr>
<tr class="separator:acbc4173b02a827bca6a960a60b65f400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67da762b98e25737b5322909235cf7b1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a67da762b98e25737b5322909235cf7b1">pal_global_irq_enable</a> (void)</td></tr>
<tr class="memdesc:a67da762b98e25737b5322909235cf7b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the global interrupt.  <a href="#a67da762b98e25737b5322909235cf7b1">More...</a><br/></td></tr>
<tr class="separator:a67da762b98e25737b5322909235cf7b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab06627709265af4e38e0eba63c6b59a9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9">pal_trx_bit_read</a> (uint8_t addr, uint8_t mask, uint8_t pos)</td></tr>
<tr class="memdesc:ab06627709265af4e38e0eba63c6b59a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">read specified bit from transceiver  <a href="#ab06627709265af4e38e0eba63c6b59a9">More...</a><br/></td></tr>
<tr class="separator:ab06627709265af4e38e0eba63c6b59a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed0355d678d59c149f001310969044a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#abed0355d678d59c149f001310969044a">pal_trx_bit_write</a> (uint8_t reg_addr, uint8_t mask, uint8_t pos, uint8_t new_value)</td></tr>
<tr class="memdesc:abed0355d678d59c149f001310969044a"><td class="mdescLeft">&#160;</td><td class="mdescRight">write specified bit to transceiver  <a href="#abed0355d678d59c149f001310969044a">More...</a><br/></td></tr>
<tr class="separator:abed0355d678d59c149f001310969044a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a567fce74d2ddb73921f679c1a907cd2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a567fce74d2ddb73921f679c1a907cd2f">pal_trx_frame_read</a> (uint8_t *data, uint8_t length)</td></tr>
<tr class="memdesc:a567fce74d2ddb73921f679c1a907cd2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload frame from transceiver.  <a href="#a567fce74d2ddb73921f679c1a907cd2f">More...</a><br/></td></tr>
<tr class="separator:a567fce74d2ddb73921f679c1a907cd2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89baa48c35c21c98b853f56ad42b9da6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a89baa48c35c21c98b853f56ad42b9da6">pal_trx_frame_write</a> (uint8_t *data, uint8_t length)</td></tr>
<tr class="memdesc:a89baa48c35c21c98b853f56ad42b9da6"><td class="mdescLeft">&#160;</td><td class="mdescRight">write frame to transceiver  <a href="#a89baa48c35c21c98b853f56ad42b9da6">More...</a><br/></td></tr>
<tr class="separator:a89baa48c35c21c98b853f56ad42b9da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec32207988a72a72fa73dbb615d9f67"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#aeec32207988a72a72fa73dbb615d9f67">pal_trx_irq_disable</a> (<a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a> trx_irq_num)</td></tr>
<tr class="memdesc:aeec32207988a72a72fa73dbb615d9f67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the transceiver interrupt.  <a href="#aeec32207988a72a72fa73dbb615d9f67">More...</a><br/></td></tr>
<tr class="separator:aeec32207988a72a72fa73dbb615d9f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ddebb432b1aef8f295d63c239e8c607"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a4ddebb432b1aef8f295d63c239e8c607">pal_trx_irq_enable</a> (<a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a> trx_irq_num)</td></tr>
<tr class="memdesc:a4ddebb432b1aef8f295d63c239e8c607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the transceiver interrupt.  <a href="#a4ddebb432b1aef8f295d63c239e8c607">More...</a><br/></td></tr>
<tr class="separator:a4ddebb432b1aef8f295d63c239e8c607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd028b087e5cbf7ba3a7e3acb530cba"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#acfd028b087e5cbf7ba3a7e3acb530cba">pal_trx_irq_flag_clr</a> (<a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a> trx_irq_num)</td></tr>
<tr class="memdesc:acfd028b087e5cbf7ba3a7e3acb530cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the transceiver interrupt.  <a href="#acfd028b087e5cbf7ba3a7e3acb530cba">More...</a><br/></td></tr>
<tr class="separator:acfd028b087e5cbf7ba3a7e3acb530cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceb006f750bff9f026625d1c9ba2085e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#aceb006f750bff9f026625d1c9ba2085e">pal_trx_irq_init</a> (<a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a> trx_irq_num, void *trx_irq_cb)</td></tr>
<tr class="memdesc:aceb006f750bff9f026625d1c9ba2085e"><td class="mdescLeft">&#160;</td><td class="mdescRight">init external interrupt  <a href="#aceb006f750bff9f026625d1c9ba2085e">More...</a><br/></td></tr>
<tr class="separator:aceb006f750bff9f026625d1c9ba2085e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0bf90d2d517ddc581401bef389591d"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d">pal_trx_reg_read</a> (uint8_t addr)</td></tr>
<tr class="memdesc:a3b0bf90d2d517ddc581401bef389591d"><td class="mdescLeft">&#160;</td><td class="mdescRight">read register from transceiver  <a href="#a3b0bf90d2d517ddc581401bef389591d">More...</a><br/></td></tr>
<tr class="separator:a3b0bf90d2d517ddc581401bef389591d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bf62e2394e1a9b52fcd492c28f50dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc">pal_trx_reg_write</a> (uint8_t addr, uint8_t data)</td></tr>
<tr class="memdesc:aa3bf62e2394e1a9b52fcd492c28f50dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">write register to transceiver  <a href="#aa3bf62e2394e1a9b52fcd492c28f50dc">More...</a><br/></td></tr>
<tr class="separator:aa3bf62e2394e1a9b52fcd492c28f50dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bbb8f8a76c36305d693461ad862b46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a77bbb8f8a76c36305d693461ad862b46">trx_interface_init</a> (void)</td></tr>
<tr class="memdesc:a77bbb8f8a76c36305d693461ad862b46"><td class="mdescLeft">&#160;</td><td class="mdescRight">init spi interace  <a href="#a77bbb8f8a76c36305d693461ad862b46">More...</a><br/></td></tr>
<tr class="separator:a77bbb8f8a76c36305d693461ad862b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1fedf9aed4fb4c3de561cfe89152d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="at86_8h.html#a1c1fedf9aed4fb4c3de561cfe89152d1">trx_irq_handler_cb</a> (void)</td></tr>
<tr class="memdesc:a1c1fedf9aed4fb4c3de561cfe89152d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transceiver interrupt handler.  <a href="#a1c1fedf9aed4fb4c3de561cfe89152d1">More...</a><br/></td></tr>
<tr class="separator:a1c1fedf9aed4fb4c3de561cfe89152d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements the API for the AT86RF231 radio transceiver. </p>

<p>Definition in file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a05b69600d1256b27dea8092ea9a23723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENABLE_TRX_SRAM</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00014">14</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

</div>
</div>
<a class="anchor" id="a14f2569844671800395115b02424adb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAL_RST_HIGH</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td>&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#aa2c48ee56a1a2b4bd081f694fcbbd33e">RST_HIGH</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00106">106</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a69366461b21ba05299802358bc8388c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAL_RST_LOW</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td>&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#a9db6cc31e44a6c3a13bcc8a89112d045">RST_LOW</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00111">111</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a909f4d81b984a22c3e09b047b5a8990d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAL_SLP_TR_HIGH</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td>&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#ab909ad4a2d0f526c282fe7d344f0c748">SLP_TR_HIGH</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00116">116</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00199">at86rf231_sleep()</a>, <a class="el" href="at86rf231_8c_source.html#l00229">at86rf231_tx()</a>, and <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>.</p>

</div>
</div>
<a class="anchor" id="a1441d594c76410852907f9b917141a24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAL_SLP_TR_LOW</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td>&#160;&#160;&#160;<a class="el" href="pal__config_8h.html#a9d68a32b5c86a30bad26138027cf5af3">SLP_TR_LOW</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00121">121</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>, <a class="el" href="at86rf231_8c_source.html#l00229">at86rf231_tx()</a>, and <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>.</p>

</div>
</div>
<a class="anchor" id="acf9e1119b777a457b32bd540a56cbf19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_ACCESS_COMMAND&#160;&#160;&#160;(0x80)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00131">131</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a67ee57bd62460fcfda2945bf557f6a08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RF_BAND&#160;&#160;&#160;BAND_2400</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00013">13</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae6e677a01ad8ab8134ffc7a68b814048"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SAMPLES_PER_PACKET&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00028">28</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="WEPO41104A02_8c_source.html#l00241">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a1bb4d5253ce0b4e39f51f284732d54c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SHORTENUM&#160;&#160;&#160;__attribute__((packed))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00010">10</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

</div>
</div>
<a class="anchor" id="a93ac6c6eb7ea847ef05f0a1ddf37a63c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TAL_TYPE&#160;&#160;&#160;AT86RF231</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00009">9</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

</div>
</div>
<a class="anchor" id="a142459b1d8d88f28b6f70db90b9fb748"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_CMD_FR&#160;&#160;&#160;(0x20)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00141">141</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="pal__trx__access_8c_source.html#l00199">pal_trx_frame_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a50a504fbcaa8f1b5ba4840d6170dba02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_CMD_FW&#160;&#160;&#160;(0x60)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00136">136</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="pal__trx__access_8c_source.html#l00244">pal_trx_frame_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a5900743b4bfc28ddf5f4aa116aed4121"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_CMD_SR&#160;&#160;&#160;(0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00151">151</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="pal__trx__access_8c_source.html#l00415">pal_trx_sram_read()</a>.</p>

</div>
</div>
<a class="anchor" id="a8b9b89efb1a80ebca833d359c02202e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRX_CMD_SW&#160;&#160;&#160;(0x40)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00146">146</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="pal__trx__access_8c_source.html#l00474">pal_trx_aes_wrrd()</a>, and <a class="el" href="pal__trx__access_8c_source.html#l00365">pal_trx_sram_write()</a>.</p>

</div>
</div>
<a class="anchor" id="a1daa2410cc8a201106812499160257bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_ACCESS_COMMAND&#160;&#160;&#160;(0xC0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="at86_8h_source.html#l00126">126</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>Referenced by <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a85471cc074a348fe55817555c12ac59b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345">csma_mode_tag</a>  <a class="el" href="at86_8h.html#a85471cc074a348fe55817555c12ac59b">csma_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transceiver csma_mode_tag </p>

</div>
</div>
<a class="anchor" id="a73c40bab4af81ce4df0c8b04471c8ac0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* irq_handler_t)(void)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a typedef of the function which is called from the transceiver ISR </p>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00099">99</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

</div>
</div>
<a class="anchor" id="a666f35fa9c02396650a934fc41040710"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5c">tal_state_tag</a> <a class="el" href="at86_8h.html#a666f35fa9c02396650a934fc41040710">tal_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AT86RF231 Transceiver states. </p>

</div>
</div>
<a class="anchor" id="aea71e6c58f5ea6ecf98fb469fb529746"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672">trx_irq_hdlr_idx_tag</a>  <a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transceiver interrupt handler index </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aa37282f17d91549add4e10942533d345"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="at86_8h.html#aa37282f17d91549add4e10942533d345">csma_mode_tag</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transceiver csma_mode_tag </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aa37282f17d91549add4e10942533d345accf068575a579e8aa4ab56de9d7eaf78"></a>NO_CSMA_NO_IFS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa37282f17d91549add4e10942533d345abbf9d12e513772ccde5b0377a1627f25"></a>NO_CSMA_WITH_IFS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa37282f17d91549add4e10942533d345aeb1c3320a3cffeb94384bf2e26afe935"></a>CSMA_UNSLOTTED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa37282f17d91549add4e10942533d345a2fdcf77d6c73072fd265eb5fc3884f09"></a>CSMA_SLOTTED</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00088">88</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345accf068575a579e8aa4ab56de9d7eaf78">NO_CSMA_NO_IFS</a>,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345abbf9d12e513772ccde5b0377a1627f25">NO_CSMA_WITH_IFS</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345aeb1c3320a3cffeb94384bf2e26afe935">CSMA_UNSLOTTED</a>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345a2fdcf77d6c73072fd265eb5fc3884f09">CSMA_SLOTTED</a></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;} <a class="code" href="at86_8h.html#a85471cc074a348fe55817555c12ac59b">csma_mode_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa30929a334a605eb5e33a386ea151a5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5c">tal_state_tag</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>AT86RF231 Transceiver states. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aa30929a334a605eb5e33a386ea151a5ca8bcdc7a42f379e0b3a4e9c190b8be5d4"></a>TAL_IDLE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa30929a334a605eb5e33a386ea151a5caa86ebb421fb1c52a6da04b629b6cc538"></a>TAL_TX_AUTO</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa30929a334a605eb5e33a386ea151a5cafad08d85ec5d300df68377df267af4a6"></a>TAL_TX_DONE</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00061">61</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5ca8bcdc7a42f379e0b3a4e9c190b8be5d4">TAL_IDLE</a>           = 0,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5caa86ebb421fb1c52a6da04b629b6cc538">TAL_TX_AUTO</a>        = 1,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5cafad08d85ec5d300df68377df267af4a6">TAL_TX_DONE</a>        = 2</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;} <a class="code" href="at86_8h.html#a1bb4d5253ce0b4e39f51f284732d54c9">SHORTENUM</a> <a class="code" href="at86_8h.html#a666f35fa9c02396650a934fc41040710" title="AT86RF231 Transceiver states. ">tal_state_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672">trx_irq_hdlr_idx_tag</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Transceiver interrupt handler index </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a0b4d8d04ed24a41b486889a49c750090"></a>TRX_MAIN_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672afae19ecc0e2e977bb5535563c897fc00"></a>TRX_TSTAMP_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a2e0700bc6ac3147e7ead21436ce98bc6"></a>TRX_ALTERNATE_0_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a5f72a3748ced8312b72036375446de23"></a>TRX_ALTERNATE_1_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a301d6c0ca0b0767908694d15edff40c1"></a>TRX_ALTERNATE_2_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a101f261d61c47c1973b531487454412a"></a>TRX_ALTERNATE_3_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672af586f1846eb2b44103e96bdd0581df2a"></a>TRX_ALTERNATE_4_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672abefcaffd94d0e4f6148f67ba9d9890a2"></a>TRX_ALTERNATE_5_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a77f592a01feca0f89df3346c8ea01e60"></a>TRX_ALTERNATE_6_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a1c991f2b544965c9056c3f3a34a7f672a7cdaaaaa7e644b1cb875f1727ace8690"></a>TRX_ALTERNATE_7_IRQ_HDLR_IDX</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00071">71</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a0b4d8d04ed24a41b486889a49c750090">TRX_MAIN_IRQ_HDLR_IDX</a> = 0,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672afae19ecc0e2e977bb5535563c897fc00">TRX_TSTAMP_IRQ_HDLR_IDX</a>,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a2e0700bc6ac3147e7ead21436ce98bc6">TRX_ALTERNATE_0_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a5f72a3748ced8312b72036375446de23">TRX_ALTERNATE_1_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a301d6c0ca0b0767908694d15edff40c1">TRX_ALTERNATE_2_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a101f261d61c47c1973b531487454412a">TRX_ALTERNATE_3_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672af586f1846eb2b44103e96bdd0581df2a">TRX_ALTERNATE_4_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672abefcaffd94d0e4f6148f67ba9d9890a2">TRX_ALTERNATE_5_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a77f592a01feca0f89df3346c8ea01e60">TRX_ALTERNATE_6_IRQ_HDLR_IDX</a>, <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a7cdaaaaa7e644b1cb875f1727ace8690">TRX_ALTERNATE_7_IRQ_HDLR_IDX</a>  <span class="comment">/* Spare IRQ for devices with multiple irqs */</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;} <a class="code" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0da266448f852413ba43e88e4ea99a84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t at86rf231_change_channel </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_channel</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply channel to transceiver. </p>
<p>change transceiver channel</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uint8_t</td><td>new_channel</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>content of channel register </dd></dl>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00369">369</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00807">CMD_TRX_OFF</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00267">SR_CHANNEL</a>, <a class="el" href="at86rf231_8h_source.html#l00450">SR_TRX_STATUS</a>, <a class="el" href="at86rf231_8h_source.html#l00875">TRX_OFF</a>, and <a class="el" href="at86rf231_8h_source.html#l00033">TRX_SUPPORTED_CHANNELS</a>.</p>

<p>Referenced by <a class="el" href="pm__config__protocol_8c_source.html#l00023">pm_config_protocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">/* TRX status variale */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> tal_trx_status = 0;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> ((uint32_t)<a class="code" href="at86rf231_8h.html#a4b91be8ac6a3df289d02951b4356230c">TRX_SUPPORTED_CHANNELS</a> &amp; ((uint32_t)0x01 &lt;&lt; new_channel ))</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">/* Set Transceiver State = TRX_OFF */</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16adbb37df7560aabee458fcd8ffc4954f7">CMD_TRX_OFF</a> );</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="comment">/* verify that state = TRX_OFF */</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">while</span>( tal_trx_status != <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a61c3cbd8978c03f5364b134a72721b3a">TRX_OFF</a> )</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            tal_trx_status = ( <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> )<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>( <a class="code" href="at86rf231_8h.html#abb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a> );</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">/* write new channel */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>, new_channel);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>(<a class="code" href="at86rf231_8h.html#a4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a0da266448f852413ba43e88e4ea99a84_cgraph.png" border="0" usemap="#at86_8h_a0da266448f852413ba43e88e4ea99a84_cgraph" alt=""/></div>
<map name="at86_8h_a0da266448f852413ba43e88e4ea99a84_cgraph" id="at86_8h_a0da266448f852413ba43e88e4ea99a84_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="231,5,345,32"/><area shape="rect" id="node7" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="230,56,346,83"/><area shape="rect" id="node10" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="395,93,515,120"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="395,31,514,57"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a0da266448f852413ba43e88e4ea99a84_icgraph.png" border="0" usemap="#at86_8h_a0da266448f852413ba43e88e4ea99a84_icgraph" alt=""/></div>
<map name="at86_8h_a0da266448f852413ba43e88e4ea99a84_icgraph" id="at86_8h_a0da266448f852413ba43e88e4ea99a84_icgraph">
<area shape="rect" id="node3" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="230,5,365,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="413,5,464,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af609fd7593c4cc52caa234572c3a0f30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool at86rf231_change_channel_page </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ch_page</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply channel page configuartion to transceiver. </p>
<p>change transceiver channel page</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch_page</td><td>Channel page</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if changes could be applied else false </dd></dl>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00398">398</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00473">AACK_ACK_TIME_12_SYMBOLS</a>, <a class="el" href="at86rf231_8h_source.html#l00476">AACK_ACK_TIME_2_SYMBOLS</a>, <a class="el" href="at86rf231_8h_source.html#l00512">ALTRATE_1MBPS</a>, <a class="el" href="at86rf231_8h_source.html#l00515">ALTRATE_250KBPS</a>, <a class="el" href="at86rf231_8h_source.html#l00518">ALTRATE_2MBPS</a>, <a class="el" href="at86rf231_8h_source.html#l00521">ALTRATE_500KBPS</a>, <a class="el" href="at86rf231_8h_source.html#l00807">CMD_TRX_OFF</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00201">SR_AACK_ACK_TIME</a>, <a class="el" href="at86rf231_8h_source.html#l00372">SR_OQPSK_DATA_RATE</a>, <a class="el" href="at86rf231_8h_source.html#l00423">SR_RX_PDT_LEVEL</a>, <a class="el" href="at86rf231_8h_source.html#l00450">SR_TRX_STATUS</a>, and <a class="el" href="at86rf231_8h_source.html#l00875">TRX_OFF</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">/* TRX status variale */</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> tal_trx_status = 0;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">/* Set Transceiver State = TRX_OFF */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16adbb37df7560aabee458fcd8ffc4954f7">CMD_TRX_OFF</a> );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">/* verify that state = TRX_OFF */</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">while</span>( tal_trx_status != <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a61c3cbd8978c03f5364b134a72721b3a">TRX_OFF</a> )</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        tal_trx_status = ( <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> )<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>( <a class="code" href="at86rf231_8h.html#abb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a> );</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">switch</span> (ch_page)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">case</span> 0: <span class="comment">/* compliant O-QPSK */</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#abfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>, <a class="code" href="at86rf231_8h.html#a142e4f6bf55dd456df2954648b97c121">ALTRATE_250KBPS</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="comment">// Apply compliant ACK timing</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#aa995e65bde71eac2b099a0a3f343706c">SR_AACK_ACK_TIME</a>, <a class="code" href="at86rf231_8h.html#a3896959248d8b9ef00968624c91b59d2">AACK_ACK_TIME_12_SYMBOLS</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="comment">// Use full sensitivity</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#ac288c78e0cf37d85b4bf008891bc98e8">SR_RX_PDT_LEVEL</a>, 0x00);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">case</span> 2: <span class="comment">/* non-compliant OQPSK mode 1 */</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#abfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>, <a class="code" href="at86rf231_8h.html#aa2bc741e30d5242f3f00232242bfdd80">ALTRATE_500KBPS</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">// Apply reduced ACK timing</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#aa995e65bde71eac2b099a0a3f343706c">SR_AACK_ACK_TIME</a>, <a class="code" href="at86rf231_8h.html#a7375408e9c3a728a3b9652d27000375c">AACK_ACK_TIME_2_SYMBOLS</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="comment">// Use full sensitivity</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#ac288c78e0cf37d85b4bf008891bc98e8">SR_RX_PDT_LEVEL</a>, 0x00);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">case</span> 16:    <span class="comment">/* non-compliant OQPSK mode 2 */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#abfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>, <a class="code" href="at86rf231_8h.html#afb5f849815b9c526338f3ffaab83781a">ALTRATE_1MBPS</a>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="comment">// Apply reduced ACK timing</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#aa995e65bde71eac2b099a0a3f343706c">SR_AACK_ACK_TIME</a>, <a class="code" href="at86rf231_8h.html#a7375408e9c3a728a3b9652d27000375c">AACK_ACK_TIME_2_SYMBOLS</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="comment">// Use full sensitivity</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#ac288c78e0cf37d85b4bf008891bc98e8">SR_RX_PDT_LEVEL</a>, 0x00);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">case</span> 17:    <span class="comment">/* non-compliant OQPSK mode 3 */</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#abfeb28eda159177c144821fd6fef7bb0">SR_OQPSK_DATA_RATE</a>, <a class="code" href="at86rf231_8h.html#a2562f32ef866798fac26c017f5cb9338">ALTRATE_2MBPS</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="comment">// Apply reduced ACK timing</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#aa995e65bde71eac2b099a0a3f343706c">SR_AACK_ACK_TIME</a>, <a class="code" href="at86rf231_8h.html#a7375408e9c3a728a3b9652d27000375c">AACK_ACK_TIME_2_SYMBOLS</a>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="comment">// Use reduced sensitivity for 2Mbit mode</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#ac288c78e0cf37d85b4bf008891bc98e8">SR_RX_PDT_LEVEL</a>, 0x01);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_af609fd7593c4cc52caa234572c3a0f30_cgraph.png" border="0" usemap="#at86_8h_af609fd7593c4cc52caa234572c3a0f30_cgraph" alt=""/></div>
<map name="at86_8h_af609fd7593c4cc52caa234572c3a0f30_cgraph" id="at86_8h_af609fd7593c4cc52caa234572c3a0f30_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="265,5,380,32"/><area shape="rect" id="node7" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="265,56,381,83"/><area shape="rect" id="node10" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="429,93,549,120"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="430,31,549,57"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_af609fd7593c4cc52caa234572c3a0f30_icgraph.png" border="0" usemap="#at86_8h_af609fd7593c4cc52caa234572c3a0f30_icgraph" alt=""/></div>
<map name="at86_8h_af609fd7593c4cc52caa234572c3a0f30_icgraph" id="at86_8h_af609fd7593c4cc52caa234572c3a0f30_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="264,5,363,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="411,5,474,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="523,5,573,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4c8415e4daa3241fe710fed12dcc503d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t at86rf231_change_tx_pwr </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pwr</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply tx power to transceiver. </p>
<p>change transceiver tx power</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uint8_t</td><td>pwr_value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>content of pwr register or 0xFF=error </dd></dl>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00460">460</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00807">CMD_TRX_OFF</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00450">SR_TRX_STATUS</a>, <a class="el" href="at86rf231_8h_source.html#l00456">SR_TX_PWR</a>, and <a class="el" href="at86rf231_8h_source.html#l00875">TRX_OFF</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">if</span>( pwr &lt;= 0x0F)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="comment">/* TRX status variale */</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> tal_trx_status = 0;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="comment">/* Set Transceiver State = TRX_OFF */</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16adbb37df7560aabee458fcd8ffc4954f7">CMD_TRX_OFF</a> );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="comment">/* verify that state = TRX_OFF */</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">while</span>( tal_trx_status != <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a61c3cbd8978c03f5364b134a72721b3a">TRX_OFF</a> )</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            tal_trx_status = ( <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> )<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>( <a class="code" href="at86rf231_8h.html#abb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a> );</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="comment">/* set power level */</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a34ec89db5926c2c2348dbc587629a9e8">SR_TX_PWR</a>, pwr );</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// 0x0   3.0 dBm</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="comment">// 0x1   2.8 dBm</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">// 0x2   2.3 dBm</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">// 0x3   1.8 dBm</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="comment">// 0x4   1.3 dBm</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">// 0x5   0.7 dBm</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">// 0x6   0.0 dBm</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// 0x7   -1 dBm</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="comment">// 0x8   -2 dBm</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="comment">// 0x9   -3 dBm</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="comment">// 0xA   -4 dBm</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">// 0xB   -5 dBm</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">// 0xC   -7 dBm</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">// 0xD   -9 dBm</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// 0xE   -12 dBm</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// 0xF   -17 dBm</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>(<a class="code" href="at86rf231_8h.html#a34ec89db5926c2c2348dbc587629a9e8">SR_TX_PWR</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">return</span> 0xFF;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a4c8415e4daa3241fe710fed12dcc503d_cgraph.png" border="0" usemap="#at86_8h_a4c8415e4daa3241fe710fed12dcc503d_cgraph" alt=""/></div>
<map name="at86_8h_a4c8415e4daa3241fe710fed12dcc503d_cgraph" id="at86_8h_a4c8415e4daa3241fe710fed12dcc503d_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="225,5,340,32"/><area shape="rect" id="node7" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="225,56,341,83"/><area shape="rect" id="node10" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="389,93,509,120"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="390,31,509,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a530e39a4d7d19f34689fea5113a88ddf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_ftn_pll_calibration </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Filter tuning and PLL calibration handling Although receiver and transmitter are very robust against these variations, it is recommended to initiate the FTN manually if the radio transceiver does not use the SLEEP state. If necessary, a calibration cycle is to be initiated in states TRX_OFF, PLL_ON or any receive state. This applies in particular for the High Data Rate Modes with a much higher sensitivity against BPF transfer function variations. The recommended calibration interval is 5 min or less. </p>
<p>filter and pll calibration</p>
<p>should be performed every 5 minutes in 2MBit-mode </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00511">511</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00798">CMD_FORCE_TRX_OFF</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, and <a class="el" href="at86rf231_8h_source.html#l00291">SR_FTN_START</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">/* Same for both filter tuning and PLL calibration. */</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a4c6ec72754e0e81a71bd3df5282a94af">CMD_FORCE_TRX_OFF</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a1a77552f46a81081a7c06ce03b855427">SR_FTN_START</a>, 1);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">/* Wait tTR16 (FTN calibration time). */</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    _delay_us(25);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a530e39a4d7d19f34689fea5113a88ddf_cgraph.png" border="0" usemap="#at86_8h_a530e39a4d7d19f34689fea5113a88ddf_cgraph" alt=""/></div>
<map name="at86_8h_a530e39a4d7d19f34689fea5113a88ddf_cgraph" id="at86_8h_a530e39a4d7d19f34689fea5113a88ddf_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="238,5,354,32"/><area shape="rect" id="node7" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="403,56,523,83"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="403,5,522,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a95cd6b5d19a0129a7b6ccb6ce985a790"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init AT86RF231 Transceiver. </p>
<p>init AT86RF231 radio cip </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00037">37</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8c_source.html#l00398">at86rf231_change_channel_page()</a>, <a class="el" href="at86rf231_8h_source.html#l00674">AT86RF231_PART_NUM</a>, <a class="el" href="at86rf231_8h_source.html#l00677">AT86RF231_VERSION_NUM</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00073">eeprom_data::channel</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00074">eeprom_data::channel_page</a>, <a class="el" href="at86rf231_8h_source.html#l00587">CLKM_1MHZ</a>, <a class="el" href="at86rf231_8h_source.html#l00602">CLKM_SHA_DISABLE</a>, <a class="el" href="at86rf231_8h_source.html#l00807">CMD_TRX_OFF</a>, <a class="el" href="at86rf231_8h_source.html#l00617">IRQ_MASK_MODE_ON</a>, <a class="el" href="pal__config_8h_source.html#l00243">MISO</a>, <a class="el" href="pal__config_8h_source.html#l00238">MOSI</a>, <a class="el" href="at86rf231_8h_source.html#l00046">P_ON_TO_CLKM_AVAILABLE</a>, <a class="el" href="at86rf231_8h_source.html#l00650">PAD_CLKM_2_MA</a>, <a class="el" href="at86_8h_source.html#l00106">PAL_RST_HIGH</a>, <a class="el" href="at86_8h_source.html#l00111">PAL_RST_LOW</a>, <a class="el" href="at86_8h_source.html#l00121">PAL_SLP_TR_LOW</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="at86_8h_source.html#l00324">pal_trx_irq_enable()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00552">pal_trx_irq_init()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00072">eeprom_data::pan_id</a>, <a class="el" href="at86rf231_8h_source.html#l00755">PD_ACK_BIT_SET_ENABLE</a>, <a class="el" href="at86rf231_8h_source.html#l00113">RG_IRQ_MASK</a>, <a class="el" href="at86rf231_8h_source.html#l00125">RG_PAN_ID_0</a>, <a class="el" href="at86rf231_8h_source.html#l00128">RG_PAN_ID_1</a>, <a class="el" href="at86rf231_8h_source.html#l00131">RG_PART_NUM</a>, <a class="el" href="at86rf231_8h_source.html#l00161">RG_SHORT_ADDR_0</a>, <a class="el" href="at86rf231_8h_source.html#l00164">RG_SHORT_ADDR_1</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00182">RG_VERSION_NUM</a>, <a class="el" href="pal__config_8h_source.html#l00253">RST</a>, <a class="el" href="at86rf231_8h_source.html#l00044">RST_PULSE_WIDTH_US</a>, <a class="el" href="at86rf231_8h_source.html#l00743">RX_SAFE_MODE_ENABLE</a>, <a class="el" href="pal__config_8h_source.html#l00233">SCK</a>, <a class="el" href="pal__config_8h_source.html#l00248">SLP_TR</a>, <a class="el" href="at86rf231_8h_source.html#l00213">SR_AACK_I_AM_COORD</a>, <a class="el" href="at86rf231_8h_source.html#l00219">SR_AACK_SET_PD</a>, <a class="el" href="at86rf231_8h_source.html#l00258">SR_CCA_MODE</a>, <a class="el" href="at86rf231_8h_source.html#l00267">SR_CHANNEL</a>, <a class="el" href="at86rf231_8h_source.html#l00270">SR_CLKM_CTRL</a>, <a class="el" href="at86rf231_8h_source.html#l00273">SR_CLKM_SHA_SEL</a>, <a class="el" href="at86rf231_8h_source.html#l00324">SR_IRQ_2_EXT_EN</a>, <a class="el" href="at86rf231_8h_source.html#l00348">SR_IRQ_MASK_MODE</a>, <a class="el" href="at86rf231_8h_source.html#l00360">SR_MAX_BE</a>, <a class="el" href="at86rf231_8h_source.html#l00369">SR_MIN_BE</a>, <a class="el" href="at86rf231_8h_source.html#l00387">SR_PAD_IO_CLKM</a>, <a class="el" href="at86rf231_8h_source.html#l00426">SR_RX_SAFE_MODE</a>, <a class="el" href="at86rf231_8h_source.html#l00450">SR_TRX_STATUS</a>, <a class="el" href="at86rf231_8h_source.html#l00456">SR_TX_PWR</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00070">eeprom_data::src_address</a>, <a class="el" href="tal__constants_8h_source.html#l00120">TAL_CCA_MODE_DEFAULT</a>, <a class="el" href="at86_8h_source.html#l00063">TAL_IDLE</a>, <a class="el" href="tal__constants_8h_source.html#l00065">TAL_MAXBE_DEFAULT</a>, <a class="el" href="tal__constants_8h_source.html#l00080">TAL_MINBE_DEFAULT</a>, <a class="el" href="tal__constants_8h_source.html#l00145">TAL_PAN_COORDINATOR_DEFAULT</a>, <a class="el" href="at86rf231_8c_source.html#l00024">tal_state</a>, <a class="el" href="at86rf231_8h_source.html#l00725">TIMESTAMPING_ENABLE</a>, <a class="el" href="pal__trx__access_8c_source.html#l00082">trx_interface_init()</a>, <a class="el" href="at86rf231_8c_source.html#l00531">trx_irq_handler_cb()</a>, <a class="el" href="at86rf231_8h_source.html#l00839">TRX_IRQ_TRX_END</a>, <a class="el" href="at86_8h_source.html#l00073">TRX_MAIN_IRQ_HDLR_IDX</a>, <a class="el" href="at86rf231_8h_source.html#l00875">TRX_OFF</a>, <a class="el" href="pal__config_8h_source.html#l00216">TRX_PORT1_DDR</a>, <a class="el" href="pal__config_8h_source.html#l00217">TRX_PORT2_DDR</a>, and <a class="el" href="eeprom__abbild_8h_source.html#l00075">eeprom_data::tx_pwr</a>.</p>

<p>Referenced by <a class="el" href="WEPO41104A02_8c_source.html#l00509">avr_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">/* TRX status variale */</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> tal_trx_status = 0;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">/* Init SPI, Interrupt, IO */</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">/* The following pins are output pins.  */</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="pal__config_8h.html#ab610063db62c840b1aa322dad71bc957">TRX_PORT2_DDR</a> |= _BV( <span class="keywordtype">SEL</span> );</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="pal__config_8h.html#abee971f515f7bc08cbceb1a565da3dc7">TRX_PORT1_DDR</a> |= _BV( <a class="code" href="pal__config_8h.html#a2dd443a4430713d325ab86895a4a45eb">SCK</a> );</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="pal__config_8h.html#ab610063db62c840b1aa322dad71bc957">TRX_PORT2_DDR</a> |= _BV( <a class="code" href="pal__config_8h.html#ac5d957e4fd3dc11cd97a54cf9ca057a4">RST</a> );</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="pal__config_8h.html#abee971f515f7bc08cbceb1a565da3dc7">TRX_PORT1_DDR</a> |= _BV( <a class="code" href="pal__config_8h.html#a5d3f11f2fdf8a7e27b975291e0c2c8cc">MOSI</a> );</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="pal__config_8h.html#abee971f515f7bc08cbceb1a565da3dc7">TRX_PORT1_DDR</a> |= _BV( <a class="code" href="pal__config_8h.html#ad8cf836a7e64b3cd7676bd1a50219cb9">SLP_TR</a> );</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">/* The following pins are input pins.  */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="pal__config_8h.html#abee971f515f7bc08cbceb1a565da3dc7">TRX_PORT1_DDR</a> &amp;= ~_BV( <a class="code" href="pal__config_8h.html#a7334c540878c8c4d801fd75ed9fd8063">MISO</a> );</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="at86_8h.html#a77bbb8f8a76c36305d693461ad862b46" title="init spi interace ">trx_interface_init</a>();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">/* Install a handler for the transceiver interrupt. */</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="at86_8h.html#aceb006f750bff9f026625d1c9ba2085e" title="init external interrupt ">pal_trx_irq_init</a>( <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a0b4d8d04ed24a41b486889a49c750090">TRX_MAIN_IRQ_HDLR_IDX</a>, ( <span class="keywordtype">void</span> * )<a class="code" href="at86rf231_8c.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. ">trx_irq_handler_cb</a> );</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="at86_8h.html#a4ddebb432b1aef8f295d63c239e8c607" title="Enables the transceiver interrupt. ">pal_trx_irq_enable</a>( <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a0b4d8d04ed24a41b486889a49c750090">TRX_MAIN_IRQ_HDLR_IDX</a> );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">/* Set RST + SLP PIN */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="at86_8h.html#a14f2569844671800395115b02424adb5">PAL_RST_HIGH</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="at86_8h.html#a1441d594c76410852907f9b917141a24">PAL_SLP_TR_LOW</a>();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    _delay_us( <a class="code" href="at86rf231_8h.html#a86b42a9108cb1f636fced59181afa79d">P_ON_TO_CLKM_AVAILABLE</a> );</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">/* Apply reset pulse */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="at86_8h.html#a69366461b21ba05299802358bc8388c0">PAL_RST_LOW</a>();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    _delay_us( <a class="code" href="at86rf231_8h.html#a21e9ead4cdffee390ba95997c431fdc2">RST_PULSE_WIDTH_US</a> );</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="at86_8h.html#a14f2569844671800395115b02424adb5">PAL_RST_HIGH</a>();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">/* Verify chip version */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">while</span>( ( <a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>( <a class="code" href="at86rf231_8h.html#ac1888aaec44899f2a3d7856b757533e8">RG_VERSION_NUM</a> ) != <a class="code" href="at86rf231_8h.html#a11b8cba56f51b9c02539895ae84a038a">AT86RF231_VERSION_NUM</a> ) ||</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;           ( <a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>( <a class="code" href="at86rf231_8h.html#a72ebcdb3490edf9a0af95c5feba492fc">RG_PART_NUM</a> ) != <a class="code" href="at86rf231_8h.html#aa559ea060eaea5e3d425297ad01d7066">AT86RF231_PART_NUM</a> ) );</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">/* Set Transceiver State = TRX_OFF */</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16adbb37df7560aabee458fcd8ffc4954f7">CMD_TRX_OFF</a> );</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">/* verify that state = TRX_OFF */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">while</span>( tal_trx_status != <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a61c3cbd8978c03f5364b134a72721b3a">TRX_OFF</a> )</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        tal_trx_status = ( <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> )<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>( <a class="code" href="at86rf231_8h.html#abb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a> );</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">/* write status variable */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    tal_trx_status = <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a61c3cbd8978c03f5364b134a72721b3a">TRX_OFF</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">/* IO Driver strength */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a436aeabd5823f138f10cf091cd0a70bf">SR_PAD_IO_CLKM</a>, <a class="code" href="at86rf231_8h.html#a64d06fa16ef1403788e826907553ecdb">PAD_CLKM_2_MA</a> );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">/* Set CLKM_SHA_DISABLE */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a3517409068f4c36eedae73ed8ffead13">SR_CLKM_SHA_SEL</a>, <a class="code" href="at86rf231_8h.html#a4659e3bad5f9cc027875bf5027e6ee9d">CLKM_SHA_DISABLE</a> );</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">/* Config clock */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#ac108f260911d536daba845f79a0c7eff">SR_CLKM_CTRL</a>, <a class="code" href="at86rf231_8h.html#a5a2a3b2dc75123f72cc228b4a8be8eac">CLKM_1MHZ</a> );</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">/* ACKs for data requests, indicate pending data */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a924acfc6524e3b4273f0d94b4b502382">SR_AACK_SET_PD</a>, <a class="code" href="at86rf231_8h.html#a2bf1f95c66de00dba283189c6f89f1ce">PD_ACK_BIT_SET_ENABLE</a> );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">/* Enable buffer protection mode */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a6d2d3f16272406c75ec8f7c2602ec063">SR_RX_SAFE_MODE</a>, <a class="code" href="at86rf231_8h.html#a5246a8435fb1820af71e23270b5e8049">RX_SAFE_MODE_ENABLE</a> );</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* Enable poll mode */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a0b612a879da54e0353cc43dbaf79de05">SR_IRQ_MASK_MODE</a>, <a class="code" href="at86rf231_8h.html#a729dc3ecf592a231d73b58a84e68bdd3">IRQ_MASK_MODE_ON</a> );</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">/* The TRX_END interrupt of the transceiver is enabled. */</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a905b648376932649f2af990f20a03df6">RG_IRQ_MASK</a>, <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fa6616c713a7ed4dfaa08202672661ed2e">TRX_IRQ_TRX_END</a> );</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">/* Enable auto time stamping */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#ac2aee8dc611b535d563db8041df15ce0">SR_IRQ_2_EXT_EN</a>, <a class="code" href="at86rf231_8h.html#a8c144f1f0aa038ba84a6ca7e70b0fbd8">TIMESTAMPING_ENABLE</a> );</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">/* write device addresses */</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a7e9a100296620bd87365a5355e3ff28d">RG_PAN_ID_0</a>,    <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a44ed4dca3b9dc58bb7c62367f821ebad">pan_id</a>); <span class="comment">//( uint8_t )( TAL_PANID_BC_DEFAULT ) );</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a30cf03f218f9c36554315f737abbedd5">RG_PAN_ID_1</a>,    <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a44ed4dca3b9dc58bb7c62367f821ebad">pan_id</a>&gt;&gt;8); <span class="comment">//( uint8_t )( TAL_PANID_BC_DEFAULT &gt;&gt; 8 ) );</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a7eb78713946ea45d4b96dea4fdfd635b">RG_SHORT_ADDR_0</a>, <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a352745e056326beab6c74345f10eb144">src_address</a>);<span class="comment">//( uint8_t )( TAL_SHORT_ADDRESS_DEFAULT ) );</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#aa60598fa1041cdf9caa245cc9fbd52cd">RG_SHORT_ADDR_1</a>, <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a352745e056326beab6c74345f10eb144">src_address</a>&gt;&gt;8);<span class="comment">//( uint8_t )( TAL_SHORT_ADDRESS_DEFAULT &gt;&gt; 8 ) );</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">/* configure TX_ARET; CSMA and CCA */</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a5f1683f4ba650a0737bf0a4cce54da51">SR_CCA_MODE</a>, <a class="code" href="tal__constants_8h.html#a9896f67e9f7e0571900b553eee3ed50b">TAL_CCA_MODE_DEFAULT</a> );</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a5c34ba9a75fedbe5c8366f6631f183ae">SR_MIN_BE</a>, <a class="code" href="tal__constants_8h.html#a8c9bdbc906b62eb937467902d3d33b7f">TAL_MINBE_DEFAULT</a> );</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#aa6921e48f6974a68e6f65f7721e237f4">SR_AACK_I_AM_COORD</a>, <a class="code" href="tal__constants_8h.html#aa65d31a856f8620fa60322032cc57838">TAL_PAN_COORDINATOR_DEFAULT</a> );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">/* set phy parameter */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a5277388c0cde68974b16c6bda2fb3f35">SR_MAX_BE</a>, <a class="code" href="tal__constants_8h.html#a9bc01d6bfa1ce843507ba7d61f5c3190">TAL_MAXBE_DEFAULT</a> );</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">/* write channel page configuration 0, 2, 16, 17, see function for more details */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="at86rf231_8c.html#af609fd7593c4cc52caa234572c3a0f30" title="Apply channel page configuartion to transceiver. ">at86rf231_change_channel_page</a>( <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a85231967f32e215af2c9594cf06540e5">channel_page</a> );</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">/* write channel */</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a4b9bff87f5d63f845e3fad83286624db">SR_CHANNEL</a>, <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#aee398e4175d3f400b61009cd45352959">channel</a> );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">/* set power level */</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>( <a class="code" href="at86rf231_8h.html#a34ec89db5926c2c2348dbc587629a9e8">SR_TX_PWR</a>, <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a726c0cfd9a61edd96b282e0c897b92ba">tx_pwr</a> );</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// 0x0   3.0 dBm</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// 0x1   2.8 dBm</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// 0x2   2.3 dBm</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// 0x3   1.8 dBm</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// 0x4   1.3 dBm</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// 0x5   0.7 dBm</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// 0x6   0.0 dBm</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// 0x7   -1 dBm</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// 0x8   -2 dBm</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// 0x9   -3 dBm</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">// 0xA   -4 dBm</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// 0xB   -5 dBm</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// 0xC   -7 dBm</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// 0xD   -9 dBm</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// 0xE   -12 dBm</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// 0xF   -17 dBm</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">/* config csma */</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">//trx_config_csma();</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">/* write status variable */</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="at86rf231_8c.html#a6ade09700f2f0240942146947398e874" title="Transceiver states. ">tal_state</a> = <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5ca8bcdc7a42f379e0b3a4e9c190b8be5d4">TAL_IDLE</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">//    volatile uint8_t temp = 0x00;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">//    temp  = pal_trx_reg_read( RG_XOSC_CTRL );</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">//    pal_trx_reg_write( RG_XOSC_CTRL, 0xFF );</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">//    temp  = pal_trx_reg_read( RG_XOSC_CTRL );</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_cgraph.png" border="0" usemap="#at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_cgraph" alt=""/></div>
<map name="at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_cgraph" id="at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_cgraph">
<area shape="rect" id="node3" href="at86rf231_8c.html#af609fd7593c4cc52caa234572c3a0f30" title="Apply channel page configuartion to transceiver. " alt="" coords="152,265,363,291"/><area shape="rect" id="node5" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="641,202,761,229"/><area shape="rect" id="node7" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="644,354,759,381"/><area shape="rect" id="node9" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="817,253,935,279"/><area shape="rect" id="node11" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="441,101,557,127"/><area shape="rect" id="node17" href="at86_8h.html#a4ddebb432b1aef8f295d63c239e8c607" title="Enables the transceiver interrupt. " alt="" coords="194,518,321,545"/><area shape="rect" id="node19" href="at86_8h.html#aceb006f750bff9f026625d1c9ba2085e" title="init external interrupt " alt="" coords="204,569,311,595"/><area shape="rect" id="node23" href="at86_8h.html#a77bbb8f8a76c36305d693461ad862b46" title="init spi interace " alt="" coords="199,619,316,646"/><area shape="rect" id="node25" href="at86rf231_8c.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. " alt="" coords="193,341,321,367"/><area shape="rect" id="node30" href="at86rf231_8c.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. " alt="" coords="411,303,586,330"/><area shape="rect" id="node33" href="at86_8h.html#a567fce74d2ddb73921f679c1a907cd2f" title="Upload frame from transceiver. " alt="" coords="635,303,767,330"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_icgraph.png" border="0" usemap="#at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_icgraph" alt=""/></div>
<map name="at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_icgraph" id="at86_8h_a95cd6b5d19a0129a7b6ccb6ce985a790_icgraph">
<area shape="rect" id="node3" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="153,5,215,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="264,5,315,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0ee158241f405a92e7fa7b507c707f93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_req_data </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data request and receive data with ACK and retry. </p>
<p>send data request command and wait for data</p>
<p>auto retransmit and autoack used </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00331">331</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="ieee__const_8h_source.html#l00047">aMaxPHYPacketSize</a>, <a class="el" href="at86rf231_8c_source.html#l00211">at86rf231_rx_with_auto_ack()</a>, <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>, <a class="el" href="at86_8h_source.html#l00041">at86rf231_frame::dest_addr</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00071">eeprom_data::dest_address</a>, <a class="el" href="at86_8h_source.html#l00040">at86rf231_frame::dest_pan_id</a>, <a class="el" href="ieee__const_8h_source.html#l01069">FCF_ACK_REQUEST</a>, <a class="el" href="ieee__const_8h_source.html#l01049">FCF_FRAMETYPE_MAC_CMD</a>, <a class="el" href="ieee__const_8h_source.html#l01120">FCF_SET_DEST_ADDR_MODE</a>, <a class="el" href="ieee__const_8h_source.html#l01054">FCF_SET_FRAMETYPE</a>, <a class="el" href="ieee__const_8h_source.html#l01115">FCF_SET_SOURCE_ADDR_MODE</a>, <a class="el" href="ieee__const_8h_source.html#l01095">FCF_SHORT_ADDR</a>, <a class="el" href="at86_8h_source.html#l00038">at86rf231_frame::frame_control_field</a>, <a class="el" href="at86_8h_source.html#l00037">at86rf231_frame::frame_length</a>, <a class="el" href="at86_8h_source.html#l00090">NO_CSMA_NO_IFS</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00072">eeprom_data::pan_id</a>, <a class="el" href="at86_8h_source.html#l00044">at86rf231_frame::payload</a>, <a class="el" href="at86_8h_source.html#l00039">at86rf231_frame::seq_number</a>, <a class="el" href="at86_8h_source.html#l00043">at86rf231_frame::src_addr</a>, <a class="el" href="eeprom__abbild_8h_source.html#l00070">eeprom_data::src_address</a>, and <a class="el" href="at86_8h_source.html#l00042">at86rf231_frame::src_pan_id</a>.</p>

<p>Referenced by <a class="el" href="pm__config__protocol_8c_source.html#l00023">pm_config_protocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;{</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;     uint8_t i = 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;     <span class="comment">/* Build frame to transmit */</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#aeb9ee25221773af668c06c96313f22f7">frame_length</a> = 67;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#a0b60db329d4d6702311e6b1386a9d3fc">frame_control_field</a> = <a class="code" href="ieee__const_8h.html#a0827103b61e6977b4aa88785b44c5783">FCF_SET_FRAMETYPE</a>(<a class="code" href="ieee__const_8h.html#a3e92c3c9f22d04938f64adc24c9938df">FCF_FRAMETYPE_MAC_CMD</a>) |</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                              <a class="code" href="ieee__const_8h.html#a98b735bad11e0561b4c9698ff6381df4">FCF_SET_DEST_ADDR_MODE</a>(<a class="code" href="ieee__const_8h.html#aa24f727f40b79dcb2a5a3d2304c2785b">FCF_SHORT_ADDR</a>) |</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                              <a class="code" href="ieee__const_8h.html#a427c247ea77df8419a5369b74da0569c">FCF_SET_SOURCE_ADDR_MODE</a>(<a class="code" href="ieee__const_8h.html#aa24f727f40b79dcb2a5a3d2304c2785b">FCF_SHORT_ADDR</a>)|</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                              <a class="code" href="ieee__const_8h.html#af5a69a2a76c0b80e20d22415a1cecd66">FCF_ACK_REQUEST</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#aa22137353acb974e49c979cd616d389e">seq_number</a> = 0xFF;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#a761c7a0b668e753aa11a67096e1dd2fb">dest_pan_id</a> = <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a44ed4dca3b9dc58bb7c62367f821ebad">pan_id</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#abd4abc3d5412cf5921d0ee605ddc7132">dest_addr</a> = <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a62c854ac33b1d470de800468a2995e34">dest_address</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#a6540ac144dac87dfb0411acd4dc841cb">src_pan_id</a> = <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a44ed4dca3b9dc58bb7c62367f821ebad">pan_id</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;     <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#a1b4415edc566172332d8d00947fc2837">src_addr</a> = <a class="code" href="at86rf231_8c.html#aebe1dbaacda0e3af18b8493670264e91" title="pointer to EEPROM image in SRAM ">ptr_eeprom_sram_data</a>-&gt;<a class="code" href="structeeprom__data.html#a352745e056326beab6c74345f10eb144">src_address</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;     <span class="comment">/* Ensure that global Interrupts are enabled */</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;     sei();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;     <span class="comment">/* Send frame with ACK */</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;     <a class="code" href="at86rf231_8c.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. ">at86rf231_tx_with_retry</a>( <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345accf068575a579e8aa4ab56de9d7eaf78">NO_CSMA_NO_IFS</a>, 1 );</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;     <span class="comment">/* Reset CMD */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;     <span class="keywordflow">for</span>(i=0;i &lt; (<a class="code" href="ieee__const_8h.html#a9da0938e6f795a2e6be402e2b616f6cb">aMaxPHYPacketSize</a> - 12) ;i++)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         <a class="code" href="at86rf231_8c.html#aceef37c0e08c31ac1d803e98d9240804" title="global receive buffer for the AT86RF231 ">at86rf231_rx_frame</a>.<a class="code" href="structat86rf231__frame.html#a5c856872df7ffcd650fb1c0ebe1f2f3e">payload</a>[i] = 0x00;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;     <span class="comment">/* Now wait for a config data packet */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;     <a class="code" href="at86rf231_8c.html#a70a4bd7b72126a48c196271354e6fff3" title="Set Transceiver State = RX_AACK_ON send ACK-Frame automatically if requested. ">at86rf231_rx_with_auto_ack</a>();</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a0ee158241f405a92e7fa7b507c707f93_cgraph.png" border="0" usemap="#at86_8h_a0ee158241f405a92e7fa7b507c707f93_cgraph" alt=""/></div>
<map name="at86_8h_a0ee158241f405a92e7fa7b507c707f93_cgraph" id="at86_8h_a0ee158241f405a92e7fa7b507c707f93_cgraph">
<area shape="rect" id="node3" href="at86rf231_8c.html#a70a4bd7b72126a48c196271354e6fff3" title="Set Transceiver State = RX_AACK_ON send ACK&#45;Frame automatically if requested. " alt="" coords="187,208,370,235"/><area shape="rect" id="node15" href="at86rf231_8c.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="201,132,357,159"/><area shape="rect" id="node5" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="627,123,747,149"/><area shape="rect" id="node7" href="at86rf231_8c.html#ab8a9e9b9256831427ca7746ec45e6345" title="Switch transceiver pll on and wait until it is locked. " alt="" coords="419,259,579,285"/><area shape="rect" id="node9" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="629,199,744,225"/><area shape="rect" id="node11" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="795,199,914,225"/><area shape="rect" id="node17" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="441,56,557,83"/><area shape="rect" id="node24" href="at86_8h.html#a89baa48c35c21c98b853f56ad42b9da6" title="write frame to transceiver " alt="" coords="431,5,566,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a0ee158241f405a92e7fa7b507c707f93_icgraph.png" border="0" usemap="#at86_8h_a0ee158241f405a92e7fa7b507c707f93_icgraph" alt=""/></div>
<map name="at86_8h_a0ee158241f405a92e7fa7b507c707f93_icgraph" id="at86_8h_a0ee158241f405a92e7fa7b507c707f93_icgraph">
<area shape="rect" id="node3" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="187,5,322,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="371,5,421,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a70a4bd7b72126a48c196271354e6fff3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_rx_with_auto_ack </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Transceiver State = RX_AACK_ON send ACK-Frame automatically if requested. </p>
<p>receive frames with auto acknowledge </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00211">211</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8c_source.html#l00167">at86rf231_switch_pll_on()</a>, <a class="el" href="at86rf231_8h_source.html#l00816">CMD_RX_AACK_ON</a>, <a class="el" href="at86rf231_8h_source.html#l00807">CMD_TRX_OFF</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00872">RX_ON</a>, and <a class="el" href="at86rf231_8c_source.html#l00024">tal_state</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00331">at86rf231_req_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">/* Set Transceiver State = TRX_OFF */</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16adbb37df7560aabee458fcd8ffc4954f7">CMD_TRX_OFF</a> );</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">/* Set Transceiver State = PLL_ON and until PLL locks */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="at86rf231_8c.html#ab8a9e9b9256831427ca7746ec45e6345" title="Switch transceiver pll on and wait until it is locked. ">at86rf231_switch_pll_on</a>(); <span class="comment">//only allowed from state = TRX_OFF</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">/* tal_state = receive mode */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="at86rf231_8c.html#a6ade09700f2f0240942146947398e874" title="Transceiver states. ">tal_state</a> = <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a043d4e3c88132157af563f5ca2c68d52">RX_ON</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">/* Set Transceiver State = RX_AACK_ON  */</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a071e2d8b5248cdd95636e4be0eeabe45">CMD_RX_AACK_ON</a>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a70a4bd7b72126a48c196271354e6fff3_cgraph.png" border="0" usemap="#at86_8h_a70a4bd7b72126a48c196271354e6fff3_cgraph" alt=""/></div>
<map name="at86_8h_a70a4bd7b72126a48c196271354e6fff3_cgraph" id="at86_8h_a70a4bd7b72126a48c196271354e6fff3_cgraph">
<area shape="rect" id="node3" href="at86rf231_8c.html#ab8a9e9b9256831427ca7746ec45e6345" title="Switch transceiver pll on and wait until it is locked. " alt="" coords="237,56,397,83"/><area shape="rect" id="node10" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="445,107,565,133"/><area shape="rect" id="node5" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="448,5,563,32"/><area shape="rect" id="node7" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="614,31,733,57"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a70a4bd7b72126a48c196271354e6fff3_icgraph.png" border="0" usemap="#at86_8h_a70a4bd7b72126a48c196271354e6fff3_icgraph" alt=""/></div>
<map name="at86_8h_a70a4bd7b72126a48c196271354e6fff3_icgraph" id="at86_8h_a70a4bd7b72126a48c196271354e6fff3_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="238,5,370,32"/><area shape="rect" id="node5" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="419,5,554,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="603,5,653,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad4bc4925ecdde78387866127fb66d3b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_sleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Transceiver mode = sleep. </p>
<p>set sleep mode </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00199">199</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00798">CMD_FORCE_TRX_OFF</a>, <a class="el" href="at86_8h_source.html#l00116">PAL_SLP_TR_HIGH</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, and <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>.</p>

<p>Referenced by <a class="el" href="WEPO41104A02_8c_source.html#l00241">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a4c6ec72754e0e81a71bd3df5282a94af">CMD_FORCE_TRX_OFF</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    _delay_us(1);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="at86_8h.html#a909f4d81b984a22c3e09b047b5a8990d">PAL_SLP_TR_HIGH</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_ad4bc4925ecdde78387866127fb66d3b3_cgraph.png" border="0" usemap="#at86_8h_ad4bc4925ecdde78387866127fb66d3b3_cgraph" alt=""/></div>
<map name="at86_8h_ad4bc4925ecdde78387866127fb66d3b3_cgraph" id="at86_8h_ad4bc4925ecdde78387866127fb66d3b3_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="168,5,288,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_ad4bc4925ecdde78387866127fb66d3b3_icgraph.png" border="0" usemap="#at86_8h_ad4bc4925ecdde78387866127fb66d3b3_icgraph" alt=""/></div>
<map name="at86_8h_ad4bc4925ecdde78387866127fb66d3b3_icgraph" id="at86_8h_ad4bc4925ecdde78387866127fb66d3b3_icgraph">
<area shape="rect" id="node3" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="168,5,219,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0090e612a1bfa60ffbb2fbf58f25895"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t at86rf231_switch_pll_on </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Switch transceiver pll on and wait until it is locked. </p>
<p>set transceiver state = pll on</p>
<p>blocks if pll does not lock </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00167">167</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00810">CMD_PLL_ON</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00116">RG_IRQ_STATUS</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00450">SR_TRX_STATUS</a>, <a class="el" href="at86rf231_8h_source.html#l00830">TRX_IRQ_PLL_LOCK</a>, and <a class="el" href="at86rf231_8h_source.html#l00875">TRX_OFF</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00211">at86rf231_rx_with_auto_ack()</a>, <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>, and <a class="el" href="pm__config__protocol_8c_source.html#l00023">pm_config_protocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="at86rf231_8h.html#a799774582b7b8fb42c037c1b13311965">trx_irq_reason_t</a> irq_status;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">/* Check if trx is in TRX_OFF; only from PLL_ON the following procedure is applicable */</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>(<a class="code" href="at86rf231_8h.html#abb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a>) != <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a61c3cbd8978c03f5364b134a72721b3a">TRX_OFF</a>)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>(<a class="code" href="at86rf231_8h.html#a7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);    <span class="comment">/* clear PLL lock bit */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">/* Switch PLL on */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a35f8f905000bb8b7041682bc8f5caba8">CMD_PLL_ON</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">/* Check if PLL has been locked. */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">//pal_get_current_time(&amp;start_time);</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        irq_status = (<a class="code" href="at86rf231_8h.html#a799774582b7b8fb42c037c1b13311965">trx_irq_reason_t</a>)<a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>(<a class="code" href="at86rf231_8h.html#a7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (irq_status &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fa3d73b17b8605238eeebbc6490fe332d3">TRX_IRQ_PLL_LOCK</a>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">break</span>;  <span class="comment">// PLL is locked now</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_cgraph.png" border="0" usemap="#at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_cgraph" alt=""/></div>
<map name="at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_cgraph" id="at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="216,5,331,32"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="382,31,501,57"/><area shape="rect" id="node8" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="213,107,333,133"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_icgraph.png" border="0" usemap="#at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_icgraph" alt=""/></div>
<map name="at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_icgraph" id="at86_8h_af0090e612a1bfa60ffbb2fbf58f25895_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a70a4bd7b72126a48c196271354e6fff3" title="Set Transceiver State = RX_AACK_ON send ACK&#45;Frame automatically if requested. " alt="" coords="214,5,397,32"/><area shape="rect" id="node7" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="627,81,762,108"/><area shape="rect" id="node11" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="227,56,383,83"/><area shape="rect" id="node5" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="446,56,578,83"/><area shape="rect" id="node9" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="811,81,861,108"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9e5cb2ff642e1ad6dcb9c02bafd10229"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_tx </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data without ACK and Retry. </p>
<p>transmit frames fast, without retry</p>
<p>manual state transition necessary </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00229">229</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00810">CMD_PLL_ON</a>, <a class="el" href="at86_8h_source.html#l00037">at86rf231_frame::frame_length</a>, <a class="el" href="at86_8h_source.html#l00116">PAL_SLP_TR_HIGH</a>, <a class="el" href="at86_8h_source.html#l00121">PAL_SLP_TR_LOW</a>, <a class="el" href="pal__trx__access_8c_source.html#l00244">pal_trx_frame_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8c_source.html#l00024">tal_state</a>, <a class="el" href="at86_8h_source.html#l00064">TAL_TX_AUTO</a>, and <a class="el" href="at86rf231_8c_source.html#l00025">tx_end_irq_flag</a>.</p>

<p>Referenced by <a class="el" href="WEPO41104A02_8c_source.html#l00598">send_all_data_rf231()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">/* Set state PLL on */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a35f8f905000bb8b7041682bc8f5caba8">CMD_PLL_ON</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">/* pal_trx_irq_disable(TRX_MAIN_IRQ_HDLR_IDX) */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="at86rf231_8c.html#a6ade09700f2f0240942146947398e874" title="Transceiver states. ">tal_state</a> = <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5caa86ebb421fb1c52a6da04b629b6cc538">TAL_TX_AUTO</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment">/* Reset TX_END Interrupt Flag */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="at86rf231_8c.html#aed259dd0360965764131f0bb170ecc7f" title="Transmit interrupt flag = 1 transmission completed. ">tx_end_irq_flag</a> = 0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">/* Toggle the SLP_TR pin triggering transmission. */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="at86_8h.html#a909f4d81b984a22c3e09b047b5a8990d">PAL_SLP_TR_HIGH</a>();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::); <span class="comment">// wait 65ns</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="at86_8h.html#a1441d594c76410852907f9b917141a24">PAL_SLP_TR_LOW</a>();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">/* Send the frame to the transceiver. */</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="at86_8h.html#a89baa48c35c21c98b853f56ad42b9da6" title="write frame to transceiver ">pal_trx_frame_write</a>( (uint8_t *)&amp;<a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>, <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#aeb9ee25221773af668c06c96313f22f7">frame_length</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_cgraph.png" border="0" usemap="#at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_cgraph" alt=""/></div>
<map name="at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_cgraph" id="at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#a89baa48c35c21c98b853f56ad42b9da6" title="write frame to transceiver " alt="" coords="147,5,282,32"/><area shape="rect" id="node5" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="155,56,275,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_icgraph.png" border="0" usemap="#at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_icgraph" alt=""/></div>
<map name="at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_icgraph" id="at86_8h_a9e5cb2ff642e1ad6dcb9c02bafd10229_icgraph">
<area shape="rect" id="node3" href="WEPO41104A02_8c.html#ab9955d15183797bee64862444d572183" title="send_all_data_rf231" alt="" coords="147,5,285,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="333,5,384,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7e0927379d6138f1c424a55b84d9955c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void at86rf231_tx_with_retry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at86_8h.html#a85471cc074a348fe55817555c12ac59b">csma_mode_t</a>&#160;</td>
          <td class="paramname"><em>csma_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tx_retries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends frame. </p>
<p>tx frames with retry</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">use_csma</td><td>Flag indicating if CSMA is requested </td></tr>
    <tr><td class="paramname">tx_retries</td><td>Flag indicating if transmission retries are requested by the MAC layer</td></tr>
  </table>
  </dd>
</dl>
<p>csma/cd not working yet </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00260">260</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8c_source.html#l00167">at86rf231_switch_pll_on()</a>, <a class="el" href="at86rf231_8h_source.html#l00819">CMD_TX_ARET_ON</a>, <a class="el" href="at86_8h_source.html#l00037">at86rf231_frame::frame_length</a>, <a class="el" href="at86_8h_source.html#l00090">NO_CSMA_NO_IFS</a>, <a class="el" href="at86_8h_source.html#l00091">NO_CSMA_WITH_IFS</a>, <a class="el" href="at86_8h_source.html#l00116">PAL_SLP_TR_HIGH</a>, <a class="el" href="at86_8h_source.html#l00121">PAL_SLP_TR_LOW</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00244">pal_trx_frame_write()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00077">RG_CSMA_BE</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00363">SR_MAX_CSMA_RETRIES</a>, <a class="el" href="at86rf231_8h_source.html#l00366">SR_MAX_FRAME_RETRIES</a>, <a class="el" href="at86rf231_8h_source.html#l00450">SR_TRX_STATUS</a>, <a class="el" href="tal__constants_8h_source.html#l00075">TAL_MAX_CSMA_BACKOFFS_DEFAULT</a>, <a class="el" href="tal__constants_8h_source.html#l00065">TAL_MAXBE_DEFAULT</a>, <a class="el" href="tal__constants_8h_source.html#l00070">TAL_MAXFRAMERETRIES_DEFAULT</a>, <a class="el" href="tal__constants_8h_source.html#l00080">TAL_MINBE_DEFAULT</a>, <a class="el" href="at86rf231_8c_source.html#l00024">tal_state</a>, <a class="el" href="at86_8h_source.html#l00064">TAL_TX_AUTO</a>, <a class="el" href="at86rf231_8h_source.html#l00893">TX_ARET_ON</a>, and <a class="el" href="at86rf231_8c_source.html#l00025">tx_end_irq_flag</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00331">at86rf231_req_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">/* TRX status variale */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> tal_trx_status = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">/* configure tx according to tx_retries */</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (tx_retries)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a1c29b8561f46d5949033e45c4a0ddcd1">SR_MAX_FRAME_RETRIES</a>, <a class="code" href="tal__constants_8h.html#a0e591b610ae815ebc761c7fc3536f5d2">TAL_MAXFRAMERETRIES_DEFAULT</a>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a1c29b8561f46d5949033e45c4a0ddcd1">SR_MAX_FRAME_RETRIES</a>, 8);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a1c29b8561f46d5949033e45c4a0ddcd1">SR_MAX_FRAME_RETRIES</a>, 0);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">/* configure tx according to csma usage */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> ((csma_mode == <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345accf068575a579e8aa4ab56de9d7eaf78">NO_CSMA_NO_IFS</a>) || (csma_mode == <a class="code" href="at86_8h.html#aa37282f17d91549add4e10942533d345abbf9d12e513772ccde5b0377a1627f25">NO_CSMA_WITH_IFS</a>))</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (tx_retries)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a90d23d615a36396e2d4ce50fc1126a60">SR_MAX_CSMA_RETRIES</a>, <a class="code" href="tal__constants_8h.html#a4bf19c6baf8b269d5435527a24208d1e">TAL_MAX_CSMA_BACKOFFS_DEFAULT</a>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a27a2452254bf5ec820d5f60254cc5c80">RG_CSMA_BE</a>, 0x00);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a90d23d615a36396e2d4ce50fc1126a60">SR_MAX_CSMA_RETRIES</a>, 7);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a27a2452254bf5ec820d5f60254cc5c80">RG_CSMA_BE</a>, ((<a class="code" href="tal__constants_8h.html#a9bc01d6bfa1ce843507ba7d61f5c3190">TAL_MAXBE_DEFAULT</a> &lt;&lt; 4) | <a class="code" href="tal__constants_8h.html#a8c9bdbc906b62eb937467902d3d33b7f">TAL_MINBE_DEFAULT</a>));</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <a class="code" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver ">pal_trx_bit_write</a>(<a class="code" href="at86rf231_8h.html#a90d23d615a36396e2d4ce50fc1126a60">SR_MAX_CSMA_RETRIES</a>, <a class="code" href="tal__constants_8h.html#a4bf19c6baf8b269d5435527a24208d1e">TAL_MAX_CSMA_BACKOFFS_DEFAULT</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">/* state change from TRX_OFF to TX_ARET_ON can be done directly, too */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="at86rf231_8c.html#ab8a9e9b9256831427ca7746ec45e6345" title="Switch transceiver pll on and wait until it is locked. ">at86rf231_switch_pll_on</a>();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a28f3392ed5f5ce33c4a62a802a5ffbed">CMD_TX_ARET_ON</a>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        _delay_us(1);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        tal_trx_status = ( <a class="code" href="at86rf231_8h.html#af34f9e3afd57c760bdc65675e82d721d">tal_trx_status_t</a> )<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>( <a class="code" href="at86rf231_8h.html#abb9dcc6f85b1154d76645b5de64d4835">SR_TRX_STATUS</a> );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    } <span class="keywordflow">while</span> (tal_trx_status != <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a0d4d30a18f58069933d4b0105ad5aebe">TX_ARET_ON</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="at86rf231_8c.html#aed259dd0360965764131f0bb170ecc7f" title="Transmit interrupt flag = 1 transmission completed. ">tx_end_irq_flag</a> = 0;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">//pal_trx_irq_disable(TRX_MAIN_IRQ_HDLR_IDX);</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="at86rf231_8c.html#a6ade09700f2f0240942146947398e874" title="Transceiver states. ">tal_state</a> = <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5caa86ebb421fb1c52a6da04b629b6cc538">TAL_TX_AUTO</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">/* Toggle the SLP_TR pin triggering transmission. */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="at86_8h.html#a909f4d81b984a22c3e09b047b5a8990d">PAL_SLP_TR_HIGH</a>();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::); <span class="comment">// wait 65ns</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">asm</span> <span class="keyword">volatile</span>(<span class="stringliteral">&quot;nop\n\t&quot;</span> ::);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="at86_8h.html#a1441d594c76410852907f9b917141a24">PAL_SLP_TR_LOW</a>();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">/* Send the frame to the transceiver. */</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="at86_8h.html#a89baa48c35c21c98b853f56ad42b9da6" title="write frame to transceiver ">pal_trx_frame_write</a>( (uint8_t *)&amp;<a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>, <a class="code" href="at86rf231_8c.html#aec9ffeda53c43230755cabac2c49fe45" title="global transmit buffer for the AT86RF231 ">at86rf231_tx_frame</a>.<a class="code" href="structat86rf231__frame.html#aeb9ee25221773af668c06c96313f22f7">frame_length</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="at86rf231_8c.html#aed259dd0360965764131f0bb170ecc7f" title="Transmit interrupt flag = 1 transmission completed. ">tx_end_irq_flag</a> == 0)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a7e0927379d6138f1c424a55b84d9955c_cgraph.png" border="0" usemap="#at86_8h_a7e0927379d6138f1c424a55b84d9955c_cgraph" alt=""/></div>
<map name="at86_8h_a7e0927379d6138f1c424a55b84d9955c_cgraph" id="at86_8h_a7e0927379d6138f1c424a55b84d9955c_cgraph">
<area shape="rect" id="node3" href="at86rf231_8c.html#ab8a9e9b9256831427ca7746ec45e6345" title="Switch transceiver pll on and wait until it is locked. " alt="" coords="211,56,371,83"/><area shape="rect" id="node5" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="421,5,536,32"/><area shape="rect" id="node10" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="419,107,539,133"/><area shape="rect" id="node13" href="at86_8h.html#abed0355d678d59c149f001310969044a" title="write specified bit to transceiver " alt="" coords="233,157,349,184"/><area shape="rect" id="node17" href="at86_8h.html#a89baa48c35c21c98b853f56ad42b9da6" title="write frame to transceiver " alt="" coords="223,208,358,235"/><area shape="rect" id="node7" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="587,56,706,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a7e0927379d6138f1c424a55b84d9955c_icgraph.png" border="0" usemap="#at86_8h_a7e0927379d6138f1c424a55b84d9955c_icgraph" alt=""/></div>
<map name="at86_8h_a7e0927379d6138f1c424a55b84d9955c_icgraph" id="at86_8h_a7e0927379d6138f1c424a55b84d9955c_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="211,5,343,32"/><area shape="rect" id="node5" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="393,5,527,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="576,5,627,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d6f026b912e361af35c507eac8e1b58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delay_us </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>usec</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3a3b1f218e1475f01a95710d06423393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_received_frame_irq </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle received frame interrupt. </p>
<p>Interrupt handler for received frames.</p>
<p>This function handles transceiver interrupts for received frames and uploads the frames from the trx. </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00625">625</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8h_source.html#l00810">CMD_PLL_ON</a>, <a class="el" href="tal__constants_8h_source.html#l00213">LENGTH_FIELD_LEN</a>, <a class="el" href="tal__constants_8h_source.html#l00248">LQI_LEN</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00199">pal_trx_frame_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00137">RG_PHY_ED_LEVEL</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, and <a class="el" href="at86rf231_8h_source.html#l00417">SR_RX_CRC_VALID</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00531">trx_irq_handler_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;{</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keyword">static</span> uint8_t ed_value;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    uint8_t frame_length;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">/* Get ED value; needed to normalize LQI. */</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    ed_value = <a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>( <a class="code" href="at86rf231_8h.html#a4caa8e52e3f9ad2217864df65fdfd501">RG_PHY_ED_LEVEL</a> );</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">/* Get frame length from transceiver. */</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="at86_8h.html#a567fce74d2ddb73921f679c1a907cd2f" title="Upload frame from transceiver. ">pal_trx_frame_read</a>( &amp;frame_length, <a class="code" href="tal__constants_8h.html#ab4346d391fd0e6408c34ba23d829d45a">LENGTH_FIELD_LEN</a> );</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">/* Check for valid frame length. */</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span>( frame_length &gt; 127 )</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">/* check if crc is valid */</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>(<a class="code" href="at86rf231_8h.html#a80bd45c004ff677a0295b38070f38cb0">SR_RX_CRC_VALID</a>) )</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">         * The PHY header is also included in the frame, hence the frame length</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">         * is incremented by 1. In addition to that, the LQI needs to be uploaded, too.</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        frame_length += <a class="code" href="tal__constants_8h.html#a2fc40f6af9aaaf69a35b4e35b70df7e6">LQI_LEN</a> + <a class="code" href="tal__constants_8h.html#ab4346d391fd0e6408c34ba23d829d45a">LENGTH_FIELD_LEN</a>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="comment">/* Upload frame and store it to the buffer */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">//pal_trx_frame_read( (uint8_t *)tal_rx_buffer, frame_length );</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <a class="code" href="at86_8h.html#a567fce74d2ddb73921f679c1a907cd2f" title="Upload frame from transceiver. ">pal_trx_frame_read</a>( (uint8_t*)&amp;<a class="code" href="at86rf231_8c.html#aceef37c0e08c31ac1d803e98d9240804" title="global receive buffer for the AT86RF231 ">at86rf231_rx_frame</a>, frame_length );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="comment">// CRC ERROR</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">/* Check if receive buffer is available */</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">if</span>( NULL == &amp;<a class="code" href="at86rf231_8c.html#aceef37c0e08c31ac1d803e98d9240804" title="global receive buffer for the AT86RF231 ">at86rf231_rx_frame</a> )</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="comment">/* Use a fast state change instead of set_trx_state(). */</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>( <a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7d0d1f76408ebdee4707f74ac1d35e16a35f8f905000bb8b7041682bc8f5caba8">CMD_PLL_ON</a> );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">         * Trx returns to RX_AACK_ON automatically, if this was its previous state.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">         * Keep the following as a reminder, if receiver is used with RX_ON instead.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="comment">//pal_trx_reg_write(RG_TRX_STATE, CMD_RX_AACK_ON);</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a3a3b1f218e1475f01a95710d06423393_cgraph.png" border="0" usemap="#at86_8h_a3a3b1f218e1475f01a95710d06423393_cgraph" alt=""/></div>
<map name="at86_8h_a3a3b1f218e1475f01a95710d06423393_cgraph" id="at86_8h_a3a3b1f218e1475f01a95710d06423393_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="239,5,353,32"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="411,31,530,57"/><area shape="rect" id="node7" href="at86_8h.html#a567fce74d2ddb73921f679c1a907cd2f" title="Upload frame from transceiver. " alt="" coords="230,107,362,133"/><area shape="rect" id="node10" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="236,157,356,184"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a3a3b1f218e1475f01a95710d06423393_icgraph.png" border="0" usemap="#at86_8h_a3a3b1f218e1475f01a95710d06423393_icgraph" alt=""/></div>
<map name="at86_8h_a3a3b1f218e1475f01a95710d06423393_icgraph" id="at86_8h_a3a3b1f218e1475f01a95710d06423393_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. " alt="" coords="229,5,357,32"/><area shape="rect" id="node5" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="405,5,504,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="553,5,615,32"/><area shape="rect" id="node9" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="664,5,715,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acbc4173b02a827bca6a960a60b65f400"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pal_global_irq_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disables the global interrupt. </p>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00364">364</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00181">DISABLE_GLOBAL_IRQ</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="pal__config_8h.html#ad1e1457db001bb525314d7ab6e80d9ad">DISABLE_GLOBAL_IRQ</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67da762b98e25737b5322909235cf7b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pal_global_irq_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enables the global interrupt. </p>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00355">355</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00178">ENABLE_GLOBAL_IRQ</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;{</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="pal__config_8h.html#a8428c8d730a3ca7ce7f5f062c2ee6a0f">ENABLE_GLOBAL_IRQ</a>();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab06627709265af4e38e0eba63c6b59a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t pal_trx_bit_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read specified bit from transceiver </p>
<p>read specified bit from transceiver</p>
<p>This function handles the non-blocking SPI transfer. Subregister read</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>offset of the register </td></tr>
    <tr><td class="paramname">mask</td><td>bit mask of the subregister </td></tr>
    <tr><td class="paramname">pos</td><td>bit position of the subregister</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value of the read bit(s) </dd></dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00323">323</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00369">at86rf231_change_channel()</a>, <a class="el" href="at86rf231_8c_source.html#l00398">at86rf231_change_channel_page()</a>, <a class="el" href="at86rf231_8c_source.html#l00460">at86rf231_change_tx_pwr()</a>, <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>, <a class="el" href="at86rf231_8c_source.html#l00167">at86rf231_switch_pll_on()</a>, <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>, <a class="el" href="at86rf231_8c_source.html#l00625">handle_received_frame_irq()</a>, <a class="el" href="pm__config__protocol_8c_source.html#l00023">pm_config_protocol()</a>, and <a class="el" href="at86rf231_8c_source.html#l00531">trx_irq_handler_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    uint8_t ret;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    ret = <a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>(addr);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    ret &amp;= mask;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    ret &gt;&gt;= pos;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_ab06627709265af4e38e0eba63c6b59a9_cgraph.png" border="0" usemap="#at86_8h_ab06627709265af4e38e0eba63c6b59a9_cgraph" alt=""/></div>
<map name="at86_8h_ab06627709265af4e38e0eba63c6b59a9_cgraph" id="at86_8h_ab06627709265af4e38e0eba63c6b59a9_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="169,5,287,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_ab06627709265af4e38e0eba63c6b59a9_icgraph.png" border="0" usemap="#at86_8h_ab06627709265af4e38e0eba63c6b59a9_icgraph" alt=""/></div>
<map name="at86_8h_ab06627709265af4e38e0eba63c6b59a9_icgraph" id="at86_8h_ab06627709265af4e38e0eba63c6b59a9_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a0da266448f852413ba43e88e4ea99a84" title="Apply channel to transceiver. " alt="" coords="651,157,827,184"/><area shape="rect" id="node5" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="875,157,1010,184"/><area shape="rect" id="node9" href="at86_8h.html#af609fd7593c4cc52caa234572c3a0f30" title="Apply channel page configuartion to transceiver. " alt="" coords="392,436,603,463"/><area shape="rect" id="node11" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="689,335,788,361"/><area shape="rect" id="node16" href="at86_8h.html#a4c8415e4daa3241fe710fed12dcc503d" title="Apply tx power to transceiver. " alt="" coords="171,259,341,285"/><area shape="rect" id="node19" href="at86_8h.html#af0090e612a1bfa60ffbb2fbf58f25895" title="Switch transceiver pll on and wait until it is locked. " alt="" coords="176,81,336,108"/><area shape="rect" id="node26" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="419,5,575,32"/><area shape="rect" id="node31" href="at86_8h.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. " alt="" coords="169,411,343,437"/><area shape="rect" id="node33" href="at86_8h.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. " alt="" coords="433,360,561,387"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="1059,183,1109,209"/><area shape="rect" id="node13" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="911,284,974,311"/><area shape="rect" id="node21" href="at86_8h.html#a70a4bd7b72126a48c196271354e6fff3" title="Set Transceiver State = RX_AACK_ON send ACK&#45;Frame automatically if requested. " alt="" coords="406,56,589,83"/><area shape="rect" id="node23" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="673,56,805,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abed0355d678d59c149f001310969044a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_trx_bit_write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>reg_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write specified bit to transceiver </p>
<p>write specified bit to transceiver</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">reg_addr</td><td>Offset of the register </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mask</td><td>Bit mask of the subregister </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pos</td><td>Bit position of the subregister </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">new_value</td><td>Data, which is muxed into the register </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00342">342</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>, and <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00369">at86rf231_change_channel()</a>, <a class="el" href="at86rf231_8c_source.html#l00398">at86rf231_change_channel_page()</a>, <a class="el" href="at86rf231_8c_source.html#l00460">at86rf231_change_tx_pwr()</a>, <a class="el" href="at86rf231_8c_source.html#l00511">at86rf231_ftn_pll_calibration()</a>, <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>, and <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    uint8_t current_reg_value;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    current_reg_value = <a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>(reg_addr);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    current_reg_value &amp;= ~mask;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    new_value &lt;&lt;= pos;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    new_value &amp;= mask;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    new_value |= current_reg_value;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(reg_addr, new_value);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_abed0355d678d59c149f001310969044a_cgraph.png" border="0" usemap="#at86_8h_abed0355d678d59c149f001310969044a_cgraph" alt=""/></div>
<map name="at86_8h_abed0355d678d59c149f001310969044a_cgraph" id="at86_8h_abed0355d678d59c149f001310969044a_cgraph">
<area shape="rect" id="node3" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="171,5,290,32"/><area shape="rect" id="node5" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="171,56,291,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_abed0355d678d59c149f001310969044a_icgraph.png" border="0" usemap="#at86_8h_abed0355d678d59c149f001310969044a_icgraph" alt=""/></div>
<map name="at86_8h_abed0355d678d59c149f001310969044a_icgraph" id="at86_8h_abed0355d678d59c149f001310969044a_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a0da266448f852413ba43e88e4ea99a84" title="Apply channel to transceiver. " alt="" coords="429,56,605,83"/><area shape="rect" id="node9" href="at86_8h.html#af609fd7593c4cc52caa234572c3a0f30" title="Apply channel page configuartion to transceiver. " alt="" coords="171,259,381,285"/><area shape="rect" id="node11" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="468,107,567,133"/><area shape="rect" id="node16" href="at86_8h.html#a4c8415e4daa3241fe710fed12dcc503d" title="Apply tx power to transceiver. " alt="" coords="191,157,361,184"/><area shape="rect" id="node18" href="at86_8h.html#a530e39a4d7d19f34689fea5113a88ddf" title="Filter tuning and PLL calibration handling Although receiver and transmitter are very robust against ..." alt="" coords="185,208,367,235"/><area shape="rect" id="node21" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="198,5,354,32"/><area shape="rect" id="node5" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="654,56,789,83"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="837,81,888,108"/><area shape="rect" id="node13" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="690,107,753,133"/><area shape="rect" id="node23" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="451,5,583,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a567fce74d2ddb73921f679c1a907cd2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_trx_frame_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Upload frame from transceiver. </p>
<p>Upload frame from transceiver.</p>
<p>This function reads the frame buffer of the transceiver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to the location to store frame </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Number of bytes to be read from the frame buffer. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00199">199</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00422">SPI_DUMMY_VALUE</a>, <a class="el" href="pal__config_8h_source.html#l00417">SPI_WAIT</a>, <a class="el" href="pal__config_8h_source.html#l00407">SS_HIGH</a>, <a class="el" href="pal__config_8h_source.html#l00402">SS_LOW</a>, and <a class="el" href="at86_8h_source.html#l00141">TRX_CMD_FR</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00625">handle_received_frame_irq()</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">/* Assumption: This function is called within ISR. */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    cli();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">/* Start SPI transaction by pulling SEL low */</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="pal__config_8h.html#a4cc9c2e44ffecead12879aad8a4105b0">SS_LOW</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">/* Send the command byte */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    SPDR0 = <a class="code" href="at86_8h.html#a142459b1d8d88f28b6f70db90b9fb748">TRX_CMD_FR</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    SPDR0 = <a class="code" href="pal__config_8h.html#ac31df245a870168c14a186d3a0fe49e0">SPI_DUMMY_VALUE</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (length != 1)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">do</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            uint8_t temp;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="comment">/* Upload the received byte in the user provided location */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            temp = SPDR0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            SPDR0 = <a class="code" href="pal__config_8h.html#ac31df245a870168c14a186d3a0fe49e0">SPI_DUMMY_VALUE</a>; <span class="comment">/* Do dummy write for initiating SPI read */</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            *data = temp;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            data++;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            length--;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        } <span class="keywordflow">while</span> (length &gt; 1);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>(); <span class="comment">/* Wait until last bytes is transmitted. */</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    *data = SPDR0;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">/* Stop the SPI transaction by setting SEL high */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="pal__config_8h.html#ad0e7e460ad3b35d25fc0845681a3fe2b">SS_HIGH</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    sei();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a567fce74d2ddb73921f679c1a907cd2f_icgraph.png" border="0" usemap="#at86_8h_a567fce74d2ddb73921f679c1a907cd2f_icgraph" alt=""/></div>
<map name="at86_8h_a567fce74d2ddb73921f679c1a907cd2f_icgraph" id="at86_8h_a567fce74d2ddb73921f679c1a907cd2f_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. " alt="" coords="187,5,362,32"/><area shape="rect" id="node5" href="at86_8h.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. " alt="" coords="411,5,539,32"/><area shape="rect" id="node7" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="587,5,685,32"/><area shape="rect" id="node9" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="734,5,797,32"/><area shape="rect" id="node11" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="845,5,896,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a89baa48c35c21c98b853f56ad42b9da6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_trx_frame_write </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write frame to transceiver </p>
<p>write frame to transceiver</p>
<p>This function writes data into the frame buffer of the transceiver</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to data to be written into frame buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Number of bytes to be written into frame buffer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00244">244</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00445">SPI_IRQ_ENABLE</a>, <a class="el" href="pal__config_8h_source.html#l00417">SPI_WAIT</a>, <a class="el" href="pal__trx__access_8c_source.html#l00055">SPI_WRITE</a>, <a class="el" href="pal__config_8h_source.html#l00407">SS_HIGH</a>, <a class="el" href="pal__config_8h_source.html#l00402">SS_LOW</a>, and <a class="el" href="at86_8h_source.html#l00136">TRX_CMD_FW</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00229">at86rf231_tx()</a>, and <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor">#ifndef NON_BLOCKING_SPI</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor"></span>    cli();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">/* Assumption: The TAL has already disabled the trx interrupt. */</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">/* Start SPI transaction by pulling SEL low */</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="pal__config_8h.html#a4cc9c2e44ffecead12879aad8a4105b0">SS_LOW</a>();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">/* Start SPI transfer by sending the command byte */</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    SPDR0 = <a class="code" href="at86_8h.html#a50a504fbcaa8f1b5ba4840d6170dba02">TRX_CMD_FW</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">do</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        uint8_t temp = *data;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        data++;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        length--;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        SPDR0 = temp;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    } <span class="keywordflow">while</span> (length &gt; 0);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>(); <span class="comment">/* Wait until last bytes is transmitted. */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">/* Stop the SPI transaction by setting SEL high */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="pal__config_8h.html#ad0e7e460ad3b35d25fc0845681a3fe2b">SS_HIGH</a>();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    sei();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    spi_state = <a class="code" href="pal__trx__access_8c.html#ac19dd1b403cc97250206ba6d630a950daffd3d8f582c4afe38f41537ef713291a">SPI_WRITE</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    spi_remaining_bytes = length;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    spi_data_ptr = data;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="pal__config_8h.html#afb64059788be17747c7c793d95f6bb07">SPI_IRQ_ENABLE</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">/* Start SPI transaction by pulling SEL low */</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="pal__config_8h.html#a4cc9c2e44ffecead12879aad8a4105b0">SS_LOW</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/* Start SPI transfer by sending the command byte */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    SPDR0 = <a class="code" href="at86_8h.html#a50a504fbcaa8f1b5ba4840d6170dba02">TRX_CMD_FW</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor"></span>}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a89baa48c35c21c98b853f56ad42b9da6_icgraph.png" border="0" usemap="#at86_8h_a89baa48c35c21c98b853f56ad42b9da6_icgraph" alt=""/></div>
<map name="at86_8h_a89baa48c35c21c98b853f56ad42b9da6_icgraph" id="at86_8h_a89baa48c35c21c98b853f56ad42b9da6_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a9e5cb2ff642e1ad6dcb9c02bafd10229" title="Send data without ACK and Retry. " alt="" coords="221,5,315,32"/><area shape="rect" id="node9" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="190,56,346,83"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#ab9955d15183797bee64862444d572183" title="send_all_data_rf231" alt="" coords="577,5,714,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="763,31,813,57"/><area shape="rect" id="node11" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="395,56,527,83"/><area shape="rect" id="node13" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="578,56,713,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeec32207988a72a72fa73dbb615d9f67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pal_trx_irq_disable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a>&#160;</td>
          <td class="paramname"><em>trx_irq_num</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disables the transceiver interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx_irq_num</td><td>One of several interrupt lines provided by the transceiver </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00335">335</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00138">DISABLE_TRX_IRQ</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="pal__config_8h.html#a910022a7e72191cc4d03b43bd5563c95">DISABLE_TRX_IRQ</a>(trx_irq_num);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4ddebb432b1aef8f295d63c239e8c607"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pal_trx_irq_enable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a>&#160;</td>
          <td class="paramname"><em>trx_irq_num</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enables the transceiver interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx_irq_num</td><td>One of several interrupt lines provided by the transceiver </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00324">324</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00114">ENABLE_TRX_IRQ</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="pal__config_8h.html#a93c3dc05f23437d4e33a25a31d0b261a">ENABLE_TRX_IRQ</a>(trx_irq_num);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a4ddebb432b1aef8f295d63c239e8c607_icgraph.png" border="0" usemap="#at86_8h_a4ddebb432b1aef8f295d63c239e8c607_icgraph" alt=""/></div>
<map name="at86_8h_a4ddebb432b1aef8f295d63c239e8c607_icgraph" id="at86_8h_a4ddebb432b1aef8f295d63c239e8c607_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="181,5,280,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="329,5,391,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="440,5,491,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acfd028b087e5cbf7ba3a7e3acb530cba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pal_trx_irq_flag_clr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a>&#160;</td>
          <td class="paramname"><em>trx_irq_num</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the transceiver interrupt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx_irq_num</td><td>One of several interrupt lines provided by the transceiver </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="at86_8h_source.html#l00346">346</a> of file <a class="el" href="at86_8h_source.html">at86.h</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00163">CLEAR_TRX_IRQ</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="pal__config_8h.html#a52860a5017e9be6afda34c49007e3cbd">CLEAR_TRX_IRQ</a>(trx_irq_num);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aceb006f750bff9f026625d1c9ba2085e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_trx_irq_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="at86_8h.html#aea71e6c58f5ea6ecf98fb469fb529746">trx_irq_hdlr_idx_t</a>&#160;</td>
          <td class="paramname"><em>trx_irq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>trx_irq_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>init external interrupt </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Interrupt</td><td>number </td></tr>
    <tr><td class="paramname">Interrupt</td><td>callback function</td></tr>
  </table>
  </dd>
</dl>
<p>init external interrupt</p>
<p>This function sets the microcontroller specific registers responsible for handling the transceiver interrupts</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trx_irq_num</td><td>Transceiver interrupt line to be initialized </td></tr>
    <tr><td class="paramname">trx_irq_cb</td><td>Callback function for the given transceiver interrupt </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00552">552</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__trx__access_8c_source.html#l00062">irq_handler</a>, <a class="el" href="at86_8h_source.html#l00073">TRX_MAIN_IRQ_HDLR_IDX</a>, and <a class="el" href="at86_8h_source.html#l00074">TRX_TSTAMP_IRQ_HDLR_IDX</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">     * Set the handler function.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">     * The handler is set before enabling the interrupt to prepare for spurious</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">     * interrupts, that can pop up the moment they are enabled</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="pal__trx__access_8c.html#a06c3b3594770371f49817002c0ec9b2d">irq_handler</a>[trx_irq_num] = (<a class="code" href="at86_8h.html#a73c40bab4af81ce4df0c8b04471c8ac0">irq_handler_t</a>)trx_irq_cb;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (trx_irq_num == <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672a0b4d8d04ed24a41b486889a49c750090">TRX_MAIN_IRQ_HDLR_IDX</a>)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">/* Init Main TRX interrupt */</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="comment">/* Select rising edge */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        EICRA |= _BV(ISC00) | _BV(ISC01);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">/* clear pending interrupt */</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        EIFR = _BV(INTF0);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#ifndef ANTENNA_DIVERSITY</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trx_irq_num == <a class="code" href="at86_8h.html#a1c991f2b544965c9056c3f3a34a7f672afae19ecc0e2e977bb5535563c897fc00">TRX_TSTAMP_IRQ_HDLR_IDX</a>)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">/* Init RX TIME STAMP interrupt */</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="comment">/* The input capture interrupt of timer is disabled */</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        TIMSK1 &amp;= ~(_BV(ICIE1));</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">/* Rising edge on input capture pin used to trigger IRQ */</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        TCCR1B |= (_BV(ICES1));</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">/* Input capture flag is cleared */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        TIFR1 |= (_BV(ICF1));</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor"></span>}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_aceb006f750bff9f026625d1c9ba2085e_icgraph.png" border="0" usemap="#at86_8h_aceb006f750bff9f026625d1c9ba2085e_icgraph" alt=""/></div>
<map name="at86_8h_aceb006f750bff9f026625d1c9ba2085e_icgraph" id="at86_8h_aceb006f750bff9f026625d1c9ba2085e_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="160,5,259,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="307,5,370,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="419,5,469,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3b0bf90d2d517ddc581401bef389591d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t pal_trx_reg_read </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>read register from transceiver </p>
<p>read register from transceiver</p>
<p>This function reads the current value from a transceiver register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Specifies the address of the trx register from which the data shall be read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value of the register read </dd></dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00149">149</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00196">ENTER_TRX_REGION</a>, <a class="el" href="pal__config_8h_source.html#l00201">LEAVE_TRX_REGION</a>, <a class="el" href="at86_8h_source.html#l00131">READ_ACCESS_COMMAND</a>, <a class="el" href="pal__config_8h_source.html#l00422">SPI_DUMMY_VALUE</a>, <a class="el" href="pal__trx__access_8c_source.html#l00053">SPI_IDLE</a>, <a class="el" href="pal__config_8h_source.html#l00417">SPI_WAIT</a>, <a class="el" href="pal__config_8h_source.html#l00407">SS_HIGH</a>, and <a class="el" href="pal__config_8h_source.html#l00402">SS_LOW</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>, <a class="el" href="at86rf231_8c_source.html#l00167">at86rf231_switch_pll_on()</a>, <a class="el" href="at86rf231_8c_source.html#l00625">handle_received_frame_irq()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, and <a class="el" href="at86rf231_8c_source.html#l00531">trx_irq_handler_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    uint8_t register_value;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    cli();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="pal__config_8h.html#a03364b3677b884617c15b752d8339e18">ENTER_TRX_REGION</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#ifdef NON_BLOCKING_SPI</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">while</span> (spi_state != <a class="code" href="pal__trx__access_8c.html#ac19dd1b403cc97250206ba6d630a950da3b368c531eb77a6e4baaacdeba1c733c">SPI_IDLE</a>)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">/* wait until SPI gets available */</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">/* Prepare the command byte */</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    addr |= <a class="code" href="at86_8h.html#acf9e1119b777a457b32bd540a56cbf19">READ_ACCESS_COMMAND</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">/* Start SPI transaction by pulling SEL low */</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="pal__config_8h.html#a4cc9c2e44ffecead12879aad8a4105b0">SS_LOW</a>();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">/* Send the Read command byte */</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    SPDR0 = addr;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">/* Do dummy read for initiating SPI read */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    SPDR0 = <a class="code" href="pal__config_8h.html#ac31df245a870168c14a186d3a0fe49e0">SPI_DUMMY_VALUE</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">/* Read the byte received */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    register_value = SPDR0;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">/* Stop the SPI transaction by setting SEL high */</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="pal__config_8h.html#ad0e7e460ad3b35d25fc0845681a3fe2b">SS_HIGH</a>();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="pal__config_8h.html#a4d42dd2c017ace613e800d6f7e8694bc">LEAVE_TRX_REGION</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    sei();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> register_value;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a3b0bf90d2d517ddc581401bef389591d_icgraph.png" border="0" usemap="#at86_8h_a3b0bf90d2d517ddc581401bef389591d_icgraph" alt=""/></div>
<map name="at86_8h_a3b0bf90d2d517ddc581401bef389591d_icgraph" id="at86_8h_a3b0bf90d2d517ddc581401bef389591d_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="847,193,945,220"/><area shape="rect" id="node9" href="at86_8h.html#af0090e612a1bfa60ffbb2fbf58f25895" title="Switch transceiver pll on and wait until it is locked. " alt="" coords="364,624,524,650"/><area shape="rect" id="node22" href="at86_8h.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. " alt="" coords="357,66,531,93"/><area shape="rect" id="node24" href="at86_8h.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. " alt="" coords="625,92,753,118"/><area shape="rect" id="node27" href="pal__trx__access_8c.html#ab06627709265af4e38e0eba63c6b59a9" title="SPI transfer ISR. " alt="" coords="175,244,289,270"/><area shape="rect" id="node43" href="pal__trx__access_8c.html#abed0355d678d59c149f001310969044a" title="Subregister write. " alt="" coords="174,421,290,448"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="1047,308,1110,334"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="1195,390,1245,417"/><area shape="rect" id="node11" href="at86_8h.html#a70a4bd7b72126a48c196271354e6fff3" title="Set Transceiver State = RX_AACK_ON send ACK&#45;Frame automatically if requested. " alt="" coords="598,573,781,600"/><area shape="rect" id="node15" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="1011,472,1146,498"/><area shape="rect" id="node18" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="611,522,767,549"/><area shape="rect" id="node13" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="830,522,962,549"/><area shape="rect" id="node32" href="at86_8h.html#a0da266448f852413ba43e88e4ea99a84" title="Apply channel to transceiver. " alt="" coords="356,472,532,498"/><area shape="rect" id="node35" href="at86_8h.html#af609fd7593c4cc52caa234572c3a0f30" title="Apply channel page configuartion to transceiver. " alt="" coords="339,320,549,346"/><area shape="rect" id="node38" href="at86_8h.html#a4c8415e4daa3241fe710fed12dcc503d" title="Apply tx power to transceiver. " alt="" coords="359,370,529,397"/><area shape="rect" id="node50" href="at86_8h.html#a530e39a4d7d19f34689fea5113a88ddf" title="Filter tuning and PLL calibration handling Although receiver and transmitter are very robust against ..." alt="" coords="353,573,535,600"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3bf62e2394e1a9b52fcd492c28f50dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pal_trx_reg_write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write register to transceiver </p>
<p>write register to transceiver</p>
<p>Writes data into a transceiver register</p>
<p>This function writes a value into transceiver register.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address of the trx register </td></tr>
    <tr><td class="paramname">data</td><td>Data to be written to trx register </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00106">106</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00196">ENTER_TRX_REGION</a>, <a class="el" href="pal__config_8h_source.html#l00201">LEAVE_TRX_REGION</a>, <a class="el" href="pal__trx__access_8c_source.html#l00053">SPI_IDLE</a>, <a class="el" href="pal__config_8h_source.html#l00417">SPI_WAIT</a>, <a class="el" href="pal__config_8h_source.html#l00407">SS_HIGH</a>, <a class="el" href="pal__config_8h_source.html#l00402">SS_LOW</a>, and <a class="el" href="at86_8h_source.html#l00126">WRITE_ACCESS_COMMAND</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00369">at86rf231_change_channel()</a>, <a class="el" href="at86rf231_8c_source.html#l00398">at86rf231_change_channel_page()</a>, <a class="el" href="at86rf231_8c_source.html#l00460">at86rf231_change_tx_pwr()</a>, <a class="el" href="at86rf231_8c_source.html#l00511">at86rf231_ftn_pll_calibration()</a>, <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>, <a class="el" href="at86rf231_8c_source.html#l00211">at86rf231_rx_with_auto_ack()</a>, <a class="el" href="at86rf231_8c_source.html#l00199">at86rf231_sleep()</a>, <a class="el" href="at86rf231_8c_source.html#l00167">at86rf231_switch_pll_on()</a>, <a class="el" href="at86rf231_8c_source.html#l00229">at86rf231_tx()</a>, <a class="el" href="at86rf231_8c_source.html#l00260">at86rf231_tx_with_retry()</a>, <a class="el" href="at86rf231_8c_source.html#l00625">handle_received_frame_irq()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00342">pal_trx_bit_write()</a>, <a class="el" href="pm__config__protocol_8c_source.html#l00023">pm_config_protocol()</a>, and <a class="el" href="at86rf231_8c_source.html#l00531">trx_irq_handler_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    cli();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="pal__config_8h.html#a03364b3677b884617c15b752d8339e18">ENTER_TRX_REGION</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#ifdef NON_BLOCKING_SPI</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">while</span> (spi_state != <a class="code" href="pal__trx__access_8c.html#ac19dd1b403cc97250206ba6d630a950da3b368c531eb77a6e4baaacdeba1c733c">SPI_IDLE</a>)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="comment">/* wait until SPI gets available */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">/* Prepare the command byte */</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    addr |= <a class="code" href="at86_8h.html#a1daa2410cc8a201106812499160257bc">WRITE_ACCESS_COMMAND</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">/* Start SPI transaction by pulling SEL low */</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="pal__config_8h.html#a4cc9c2e44ffecead12879aad8a4105b0">SS_LOW</a>();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">/* Send the Read command byte */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    SPDR0 = addr;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">/* Write the byte in the transceiver data register */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    SPDR0 = data;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="pal__config_8h.html#a017204f162223026f7b9fcaa52398cef">SPI_WAIT</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">/* Stop the SPI transaction by setting SEL high */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="pal__config_8h.html#ad0e7e460ad3b35d25fc0845681a3fe2b">SS_HIGH</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="pal__config_8h.html#a4d42dd2c017ace613e800d6f7e8694bc">LEAVE_TRX_REGION</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    sei();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_aa3bf62e2394e1a9b52fcd492c28f50dc_icgraph.png" border="0" usemap="#at86_8h_aa3bf62e2394e1a9b52fcd492c28f50dc_icgraph" alt=""/></div>
<map name="at86_8h_aa3bf62e2394e1a9b52fcd492c28f50dc_icgraph" id="at86_8h_aa3bf62e2394e1a9b52fcd492c28f50dc_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a0da266448f852413ba43e88e4ea99a84" title="Apply channel to transceiver. " alt="" coords="415,360,591,387"/><area shape="rect" id="node5" href="pm__config__protocol_8c.html#abcc456d73d4fc7a801c502e2ccf9b5c9" title="pm_config_protocol" alt="" coords="839,461,974,488"/><area shape="rect" id="node9" href="at86_8h.html#af609fd7593c4cc52caa234572c3a0f30" title="Apply channel page configuartion to transceiver. " alt="" coords="397,208,608,235"/><area shape="rect" id="node11" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="673,208,772,235"/><area shape="rect" id="node16" href="at86_8h.html#a4c8415e4daa3241fe710fed12dcc503d" title="Apply tx power to transceiver. " alt="" coords="418,157,587,184"/><area shape="rect" id="node18" href="at86_8h.html#a530e39a4d7d19f34689fea5113a88ddf" title="Filter tuning and PLL calibration handling Although receiver and transmitter are very robust against ..." alt="" coords="411,309,594,336"/><area shape="rect" id="node21" href="at86_8h.html#a70a4bd7b72126a48c196271354e6fff3" title="Set Transceiver State = RX_AACK_ON send ACK&#45;Frame automatically if requested. " alt="" coords="411,512,594,539"/><area shape="rect" id="node26" href="at86_8h.html#ad4bc4925ecdde78387866127fb66d3b3" title="Set Transceiver mode = sleep. " alt="" coords="666,613,779,640"/><area shape="rect" id="node29" href="at86_8h.html#af0090e612a1bfa60ffbb2fbf58f25895" title="Switch transceiver pll on and wait until it is locked. " alt="" coords="181,461,341,488"/><area shape="rect" id="node32" href="at86_8h.html#a7e0927379d6138f1c424a55b84d9955c" title="Sends frame. " alt="" coords="425,411,581,437"/><area shape="rect" id="node36" href="at86_8h.html#a9e5cb2ff642e1ad6dcb9c02bafd10229" title="Send data without ACK and Retry. " alt="" coords="676,664,769,691"/><area shape="rect" id="node42" href="at86_8h.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. " alt="" coords="174,5,349,32"/><area shape="rect" id="node44" href="at86_8h.html#a1c1fedf9aed4fb4c3de561cfe89152d1" title="Transceiver interrupt handler. " alt="" coords="439,56,567,83"/><area shape="rect" id="node47" href="pal__trx__access_8c.html#abed0355d678d59c149f001310969044a" title="Subregister write. " alt="" coords="203,259,319,285"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="1024,500,1075,527"/><area shape="rect" id="node13" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="875,309,938,336"/><area shape="rect" id="node23" href="at86_8h.html#a0ee158241f405a92e7fa7b507c707f93" title="Send data request and receive data with ACK and retry. " alt="" coords="657,411,789,437"/><area shape="rect" id="node38" href="WEPO41104A02_8c.html#ab9955d15183797bee64862444d572183" title="send_all_data_rf231" alt="" coords="838,627,975,653"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a77bbb8f8a76c36305d693461ad862b46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_interface_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>init spi interace </p>
<p>init spi interace</p>
<p>This function initializes the transceiver interface. </p>

<p>Definition at line <a class="el" href="pal__trx__access_8c_source.html#l00082">82</a> of file <a class="el" href="pal__trx__access_8c_source.html">pal_trx_access.c</a>.</p>

<p>References <a class="el" href="pal__config_8h_source.html#l00427">TRX_INIT</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="pal__config_8h.html#ae88aa5891f9d4d866a3673230547b09a">TRX_INIT</a>();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a77bbb8f8a76c36305d693461ad862b46_icgraph.png" border="0" usemap="#at86_8h_a77bbb8f8a76c36305d693461ad862b46_icgraph" alt=""/></div>
<map name="at86_8h_a77bbb8f8a76c36305d693461ad862b46_icgraph" id="at86_8h_a77bbb8f8a76c36305d693461ad862b46_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="171,5,269,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="318,5,381,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="429,5,480,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c1fedf9aed4fb4c3de561cfe89152d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trx_irq_handler_cb </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transceiver interrupt handler. </p>
<p>external interrupt handler</p>
<p>This function handles the transceiver generated interrupts. </p>

<p>Definition at line <a class="el" href="at86rf231_8c_source.html#l00531">531</a> of file <a class="el" href="at86rf231_8c_source.html">at86rf231.c</a>.</p>

<p>References <a class="el" href="at86rf231_8c_source.html#l00625">handle_received_frame_irq()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00323">pal_trx_bit_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00149">pal_trx_reg_read()</a>, <a class="el" href="pal__trx__access_8c_source.html#l00106">pal_trx_reg_write()</a>, <a class="el" href="at86rf231_8h_source.html#l00116">RG_IRQ_STATUS</a>, <a class="el" href="at86rf231_8h_source.html#l00176">RG_TRX_STATE</a>, <a class="el" href="at86rf231_8h_source.html#l00872">RX_ON</a>, <a class="el" href="at86rf231_8h_source.html#l00444">SR_TRAC_STATUS</a>, <a class="el" href="at86rf231_8c_source.html#l00024">tal_state</a>, <a class="el" href="at86_8h_source.html#l00064">TAL_TX_AUTO</a>, <a class="el" href="at86_8h_source.html#l00065">TAL_TX_DONE</a>, <a class="el" href="at86rf231_8h_source.html#l00917">TRAC_INVALID</a>, <a class="el" href="at86rf231_8h_source.html#l00849">TRX_IRQ_AMI</a>, <a class="el" href="at86rf231_8h_source.html#l00855">TRX_IRQ_BAT_LOW</a>, <a class="el" href="at86rf231_8h_source.html#l00846">TRX_IRQ_CCA_ED_READY</a>, <a class="el" href="at86rf231_8h_source.html#l00833">TRX_IRQ_PLL_UNLOCK</a>, <a class="el" href="at86rf231_8h_source.html#l00836">TRX_IRQ_RX_START</a>, <a class="el" href="at86rf231_8h_source.html#l00839">TRX_IRQ_TRX_END</a>, <a class="el" href="at86rf231_8h_source.html#l00852">TRX_IRQ_TRX_UR</a>, and <a class="el" href="at86rf231_8c_source.html#l00025">tx_end_irq_flag</a>.</p>

<p>Referenced by <a class="el" href="at86rf231_8c_source.html#l00037">at86rf231_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="at86rf231_8h.html#a799774582b7b8fb42c037c1b13311965">trx_irq_reason_t</a> trx_irq_cause;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="at86rf231_8h.html#a500989d98a122ed567fbb7a94626a96a">trx_trac_status_t</a> trx_trac_status;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">/* what was the reason for the interrupt */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    trx_irq_cause = (<a class="code" href="at86rf231_8h.html#a799774582b7b8fb42c037c1b13311965">trx_irq_reason_t</a>)<a class="code" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver ">pal_trx_reg_read</a>(<a class="code" href="at86rf231_8h.html#a7dec4b1e3d3bfd3e9f6c243abc4f008e">RG_IRQ_STATUS</a>);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fa6616c713a7ed4dfaa08202672661ed2e">TRX_IRQ_TRX_END</a>)</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">         * TRX_END reason depends on if the trx is currently used for</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">         * transmission or reception.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="at86rf231_8c.html#a6ade09700f2f0240942146947398e874" title="Transceiver states. ">tal_state</a> == <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5caa86ebb421fb1c52a6da04b629b6cc538">TAL_TX_AUTO</a>)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="comment">/* Get the result and push it to the queue. */</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fad5f6792840de9791eb5a04643455c35c">TRX_IRQ_TRX_UR</a>)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                trx_trac_status = <a class="code" href="at86rf231_8h.html#ae81320018765f7b23be82be6eb7a5e5ba5d46678d50e398369b03f0ea41a752a4">TRAC_INVALID</a>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <span class="comment">/* Check if no ACK was received */</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                trx_trac_status = (<a class="code" href="at86rf231_8h.html#a500989d98a122ed567fbb7a94626a96a">trx_trac_status_t</a>)<a class="code" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver ">pal_trx_bit_read</a>(<a class="code" href="at86rf231_8h.html#a4692d9ea2770ff145d1c35c513cbf1d6">SR_TRAC_STATUS</a>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <a class="code" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver ">pal_trx_reg_write</a>(<a class="code" href="at86rf231_8h.html#a9154e18a2399240c300da352be8c14c5">RG_TRX_STATE</a>, <a class="code" href="at86rf231_8h.html#a7e37140a291528df8dbb108869fc4231a043d4e3c88132157af563f5ca2c68d52">RX_ON</a>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <a class="code" href="at86rf231_8c.html#aed259dd0360965764131f0bb170ecc7f" title="Transmit interrupt flag = 1 transmission completed. ">tx_end_irq_flag</a> = 1;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <a class="code" href="at86rf231_8c.html#a6ade09700f2f0240942146947398e874" title="Transceiver states. ">tal_state</a> = <a class="code" href="at86_8h.html#aa30929a334a605eb5e33a386ea151a5cafad08d85ec5d300df68377df267af4a6">TAL_TX_DONE</a>;    <span class="comment">// Further handling is done by tx_done_handling()</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">else</span>   <span class="comment">/* Other tal_state than TAL_TX_... */</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="comment">/* address match interrupt */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442faa2875594bf48afbe1a4aedf9278ab723">TRX_IRQ_AMI</a>)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="comment">/* Handle rx interrupt. */</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <a class="code" href="at86rf231_8c.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. ">handle_received_frame_irq</a>();    <span class="comment">// see tal_rx.c</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">//#define DEBUG 1</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#if (DEBUG &gt; 0)</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor"></span>    <span class="comment">/* Other IRQ than TRX_END */</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (trx_irq_cause != TRX_IRQ_TRX_END)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment">/* PLL_LOCK interrupt migth be set, because poll mode is enabled. */</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">        if (trx_irq_cause &amp; TRX_IRQ_PLL_LOCK)</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">        {</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">            ASSERT(&quot;unexpected IRQ: TRX_IRQ_PLL_LOCK&quot; == 0);</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fa27357cfc87830b4b17f7c34d48ff3e76">TRX_IRQ_PLL_UNLOCK</a>)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="comment">//ASSERT(&quot;unexpected IRQ: TRX_IRQ_PLL_UNLOCK&quot; == 0);</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">/* RX_START interrupt migth be set, because poll mode is enabled. */</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fa1e89c1330eebbcbf35e8a25ada232d43">TRX_IRQ_RX_START</a>)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="comment">//ASSERT(&quot;unexpected IRQ: TRX_IRQ_RX_START&quot; == 0);</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442fad96f390070506ef9da2858c6f8e647ee">TRX_IRQ_CCA_ED_READY</a>)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="comment">//ASSERT(&quot;unexpected IRQ: TRX_IRQ_CCA_ED_READY&quot; == 0);</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">/* AMI interrupt might set, because poll mode is enabled. */</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442faa2875594bf48afbe1a4aedf9278ab723">TRX_IRQ_AMI</a>)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="comment">//ASSERT(&quot;unexpected IRQ: TRX_IRQ_AMI&quot; == 0);</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">if</span> (trx_irq_cause &amp; TRX_IRQ_TRX_UR)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="comment">//ASSERT(&quot;unexpected IRQ: TRX_IRQ_TRX_UR&quot; == 0);</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> (trx_irq_cause &amp; <a class="code" href="at86rf231_8h.html#aaa3e9de305ccd89eb0b069047a71442faa0e58b2e323cc85d7177da5f1e935c6d">TRX_IRQ_BAT_LOW</a>)</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="comment">//ASSERT(&quot;unexpected IRQ: TRX_IRQ_BAT_LOW&quot; == 0);</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}<span class="comment">/* trx_irq_handler_cb() */</span></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_cgraph.png" border="0" usemap="#at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_cgraph" alt=""/></div>
<map name="at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_cgraph" id="at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_cgraph">
<area shape="rect" id="node3" href="at86rf231_8c.html#a3a3b1f218e1475f01a95710d06423393" title="Handle received frame interrupt. " alt="" coords="182,78,357,105"/><area shape="rect" id="node5" href="at86_8h.html#a3b0bf90d2d517ddc581401bef389591d" title="read register from transceiver " alt="" coords="587,27,706,54"/><area shape="rect" id="node9" href="at86_8h.html#ab06627709265af4e38e0eba63c6b59a9" title="read specified bit from transceiver " alt="" coords="415,27,529,54"/><area shape="rect" id="node12" href="at86_8h.html#aa3bf62e2394e1a9b52fcd492c28f50dc" title="write register to transceiver " alt="" coords="412,179,532,206"/><area shape="rect" id="node7" href="at86_8h.html#a567fce74d2ddb73921f679c1a907cd2f" title="Upload frame from transceiver. " alt="" coords="406,78,538,105"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_icgraph.png" border="0" usemap="#at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_icgraph" alt=""/></div>
<map name="at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_icgraph" id="at86_8h_a1c1fedf9aed4fb4c3de561cfe89152d1_icgraph">
<area shape="rect" id="node3" href="at86_8h.html#a95cd6b5d19a0129a7b6ccb6ce985a790" title="Init AT86RF231 Transceiver. " alt="" coords="181,5,280,32"/><area shape="rect" id="node5" href="WEPO41104A02_8c.html#a4ae6edab9a918f82c63b98920fa10f1c" title="Initialization of the controller and all sensors. " alt="" coords="329,5,391,32"/><area shape="rect" id="node7" href="WEPO41104A02_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="Main function. " alt="" coords="440,5,491,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 11 2013 14:08:46 for SPIKE 1.1 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
